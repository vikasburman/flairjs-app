/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.client.vue
 *     File: ./flair.client.vue.js
 *  Version: 0.59.0
 *  Thu, 05 Sep 2019 01:06:45 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.client.vue"]=e}(this,async function(t,e){"use strict";const{Class:i,Struct:a,Enum:s,Interface:n,Mixin:r,Aspects:o,AppDomain:l,$$:h,attr:c,bring:u,Container:p,include:y,Port:d,on:m,post:f,telemetry:w,Reflector:$,Serializer:v,Tasks:g,as:b,is:A,isDefined:x,isComplies:V,isDerivedFrom:F,isAbstract:O,isSealed:P,isStatic:D,isSingleton:S,isDeprecated:C,isImplements:T,isInstanceOf:j,isMixed:I,getAssembly:M,getAttr:N,getContext:L,getResource:E,getRoute:W,getType:B,ns:k,getTypeOf:R,getTypeName:z,typeOf:H,dispose:J,using:U,Args:_,Exception:G,noop:q,nip:K,nim:Q,nie:X,event:Y}=t,{TaskInfo:Z}=t.Tasks,{env:tt}=t.options,{guid:et,stuff:it,replaceAll:at,splitAndTrim:st,findIndexByProp:nt,findItemByProp:rt,which:ot,isArrowFunc:lt,isASyncFunc:ht,sieve:ct,deepMerge:ut,getLoadedScript:pt,b64EncodeUnicode:yt,b64DecodeUnicode:dt,lens:mt,globalSetting:ft}=t.utils,{$$static:wt,$$abstract:$t,$$virtual:vt,$$override:gt,$$sealed:bt,$$private:At,$$privateSet:xt,$$protected:Vt,$$protectedSet:Ft,$$readonly:Ot,$$async:Pt,$$overload:Dt,$$enumerate:St,$$dispose:Ct,$$post:Tt,$$on:jt,$$timer:It,$$type:Mt,$$args:Nt,$$inject:Lt,$$resource:Et,$$asset:Wt,$$singleton:Bt,$$serialize:kt,$$deprecate:Rt,$$session:zt,$$state:Ht,$$conditional:Jt,$$noserialize:Ut,$$ns:_t}=h,Gt=tt.isServer||tt.isWorker?null:(!0).document,qt=l.context.current().name,Kt=e,Qt=Kt.substr(0,Kt.lastIndexOf("/")+1);l.loadPathOf("flair.client.vue",Qt);let Xt=JSON.parse('{"vue":{"extensions":[]},"layout":{"default":"","html2Layout":"flair.ui.VueLayout","viewAreaEl":"view"},"static":{"layout":"","i18n":""},"showdown":{}}'),Yt=t.Port("settingsReader");if("function"==typeof Yt){let t=Yt("flair.client.vue");t&&(Xt=ut([Xt,t],!1))}Xt=Object.freeze(Xt);let Zt=JSON.parse("{}");return Zt=Object.freeze(Zt),l.context.current().currentAssemblyBeingLoaded("./flair.client.vue{.min}.js"),await(async()=>{h("ns","flair.ui"),r("VueComponentMembers",function(){var t=this,e=et();h("private"),this.define=(async()=>{const i=await y("vue/vue{.min}.js"),{ViewHandler:a,ViewState:s,VueFilter:n,VueMixin:r,VueDirective:o,VueComponent:h}=await k("flair.ui");let c=new s,u={},p=d("clientFile");const m=async()=>{if(!this.baseName){let t=this.$Type.getName(),e=t.substr(t.lastIndexOf(".")+1);this.baseName=e}this.basePath||(this.basePath=this.$Type.getAssembly().assetsPath()),this.localePath||(this.localePath=this.$Type.getAssembly().localesPath())},f=async()=>{const t=t=>{if("string"==typeof t&&t.startsWith("res:")){let e=t.substr(4),i=l.context.current().getResource(e)||null;return i?i.data:t}return t};"boolean"==typeof this.style&&!0===this.style?this.style=ot(`./${this.baseName}/index{.min}.css`,!0):this.style=t(this.style),"boolean"==typeof this.html&&!0===this.html?this.html=ot(`./${this.baseName}/index{.min}.html`,!0):this.html=t(this.html),"boolean"==typeof this.data&&!0===this.data?this.data=ot(`./${this.baseName}/index{.min}.json`,!0):this.data=t(this.data)},w=async()=>{"string"==typeof this.style&&this.style.endsWith(".css")&&(this.style=this.style.replace("./",this.basePath),this.style=await p(this.style)),this.style&&(this.style=at(this.style,"#SCOPE_ID",`#${e}`),a.addStyle(e,this.style))},$=async()=>{"string"==typeof this.html&&this.html.endsWith(".html")&&(this.html=this.html.replace("./",this.basePath),this.html=await p(this.html)),this.html=`<div id="${e}">${this.html}</div>`},v=async()=>{"string"==typeof this.data&&this.data.endsWith(".json")&&(this.data=this.data.replace("./",this.basePath),this.data=await p(this.data))},g=async()=>{if(this.i18n){let t="";if("string"==typeof this.i18n){let t=this.i18n.split(",");this.i18n={};for(let e of t)this.i18n[e.trim()]=!1}for(let e in this.i18n)this.i18n.hasOwnProperty(e)&&(t=(t=this.i18n[e]||`./${e}.json`).replace("./",this.localePath+this.locale()+"/"),this.i18n[e]=await p(t))}},A=async()=>{if(this.state&&Array.isArray(this.state))for(let t of this.state){if(u.computed[t.name])throw G.InvalidDefinition(`Computed (state) property already defined. (${t.name})`);u.computed=u.computed||{},u.computed[t.name]={get:function(){return c.get(t.path,t.name)||t.value},set:function(e){c.set(t.path,t.name,e)}}}},x=async()=>{u.methods=u.methods||{},u.methods["path"]=((e,i)=>t.path(e,i)),u.methods["route"]=((e,i)=>t.route(e,i)),u.methods["stuff"]=((t,...e)=>it(t,e)),this.i18n&&(u.methods["locale"]=(e=>t.locale(e)),u.methods["i18n"]=(e=>t.i18nValue(e)))},V=async()=>{this.render&&"function"==typeof this.render&&(u.render=this.render)},F=async()=>{"boolean"==typeof this.functional&&(u.functional=this.functional)},O=async()=>{if(this.computed)for(let t in this.computed)if(this.computed.hasOwnProperty(t)){if(u.computed[t])throw G.InvalidDefinition(`Computed member already defined. (${t})`);u.computed=u.computed||{},u.computed[t]=this.computed[t]}},P=async()=>{if(this.methods)for(let t in this.methods)if(this.methods.hasOwnProperty(t)){if(u.methods[t])throw G.InvalidDefinition(`Method already defined. (${t})`);u.methods=u.methods||{},u.methods[t]=this.methods[t]}},D=async()=>{if(this.watch)for(let t in this.watch)if(this.watch.hasOwnProperty(t)){if(u.watch[t])throw G.InvalidDefinition(`Watch member already defined. (${t})`);u.watch=u.watch||{},u.watch[t]=this.watch[t]}},S=async()=>{if(this.lifecycle)for(let t in this.lifecycle)if(this.lifecycle.hasOwnProperty(t)){if(u[t])throw G.InvalidDefinition(`Lifecycle hook already defined. (${t})`);u[t]=this.lifecycle[t]}},C=async()=>{if(this.components&&Array.isArray(this.components)){let t=null,e=null;for(let a of this.components){if(!a.name)throw G.OperationFailed(`Component name cannot be empty. (${a.type})`);if(!a.type)throw G.OperationFailed(`Component type cannot be empty. (${a.name})`);if(i.options.components[a.name])throw G.Duplicate(`Component already registered. (${a.name})`);if(!(t=b(await y(a.type),h)))throw G.InvalidArgument(a.type);try{if(e=new t,u.components&&u.components[a.name])throw G.Duplicate(`Component already registered. (${a.name})`);u.components=u.components||{},u.components[a.name]=await e.factory()}catch(t){throw G.OperationFailed(`Component registration failed. (${a.type})`,t)}}}},T=async()=>{if(this.mixins&&Array.isArray(this.mixins)){let t=null,e=null;for(let i of this.mixins){if(!i.name)throw G.OperationFailed(`Mixin name cannot be empty. (${i.type})`);if(!i.type)throw G.OperationFailed(`Mixin type cannot be empty. (${i.name})`);if(!(t=b(await y(i.type),r)))throw G.InvalidArgument(i.type);try{if(e=new t,u.mixins&&u.mixins[i.name])throw G.Duplicate(`Mixin already registered. (${i.name})`);u.mixins=u.mixins||{},u.mixins[i.name]=await e.factory()}catch(t){throw G.OperationFailed(`Mixin registration failed. (${i.type})`,t)}}}},j=async()=>{if(this.directives&&Array.isArray(this.directives)){let t=null,e=null;for(let i of this.directives){if(!i.name)throw G.OperationFailed(`Directive name cannot be empty. (${i.type})`);if(!i.type)throw G.OperationFailed(`Directive type cannot be empty. (${i.name})`);if(!(t=b(await y(i.type),o)))throw G.InvalidArgument(i.type);try{if(e=new t,u.directives&&u.directives[i.name])throw G.Duplicate(`Directive already registered. (${i.name})`);u.directives=u.directives||{},u.directives[i.name]=await e.factory()}catch(t){throw G.OperationFailed(`Directive registration failed. (${i.type})`,t)}}}},I=async()=>{if(this.filters&&Array.isArray(this.filters)){let t=null,e=null;for(let i of this.filters){if(!i.name)throw G.OperationFailed(`Filter name cannot be empty. (${i.type})`);if(!i.type)throw G.OperationFailed(`Filter type cannot be empty. (${i.name})`);if(!(t=b(await y(i.type),n)))throw G.InvalidArgument(i.type);try{if(e=new t,u.filters&&u.filters[i.name])throw G.Duplicate(`Filter already registered. (${i.name})`);u.filters=u.filters||{},u.filters[i.name]=await e.factory()}catch(t){throw G.OperationFailed(`Filter registration failed. (${i.type})`,t)}}}},M=async()=>{this.provide&&Array.isArray(this.provide)&&(u.provide=this.provide),this.inject&&Array.isArray(this.inject)&&(u.inject=this.inject)};return await m(),await f(),await w(),await $(),await v(),await g(),await A(),await x(),await V(),await F(),await O(),await P(),await D(),await S(),await C(),await T(),await j(),await I(),await M(),u}),h("readonly"),this.id=e,h("protected"),this.baseName="",h("protected"),this.basePath="",h("protected"),this.localePath="",h("protected"),this.locale=(t=>l.host().locale(t)),h("protected"),this.path=((t,e)=>l.host().pathToUrl(t,e)),h("protected"),this.route=((t,e)=>l.host().routeToUrl(t,e)),h("protected"),this.i18n=null,h("protected"),this.i18nValue=(t=>{let e=t||"",i=tt.isDebug?":":"";if(t&&t.startsWith("@")){let a=(t=t.substr(1)).split("|");t=a[0].trim(),e=a[1].trim()||"",this.i18n&&(e=mt(this.i18n,t)||i+e+i)}return e||"(i18n: 404)"}),h("protected"),this.style=null,h("protected"),this.html=null,h("protected"),this.data=null,h("protected"),this.template=null,h("protected"),this.render=null,h("protected"),this.functional=!1,h("protected"),this.computed=null,h("protected"),this.state=null,h("protected"),this.methods=null,h("protected"),this.watch=null,h("protected"),this.lifecycle=null,h("protected"),this.components=null,h("protected"),this.mixins=null,h("protected"),this.directives=null,h("protected"),this.filters=null,h("protected"),this.provide=null,h("protected"),this.inject=null})})(),await(async()=>{const{ViewHandler:t}=await k("flair.ui"),{VueComponentMembers:e}=await k("flair.ui");h("ns","flair.ui"),i("VueView",t,[e],function(){h("private"),this.factory=(async()=>{let t=null,e=d("clientFile");const i=async()=>{let t=!1,i="";if("boolean"==typeof this.layout&&!0===this.layout)this.layout=Xt.layout.default||null;else if("string"==typeof this.layout)if(this.layout.startsWith("res:")){let e=this.layout.substr(4),a=l.context.current().getResource(e)||null;(t=a&&a.data)&&(i=a.data,this.layout=Xt.layout.html2Layout)}else if(this.layout.endsWith(".html")){t=!0;let a=ot(this.layout.replace("./",this.basePath),!0);i=await e(a),this.layout=Xt.layout.html2Layout}if("string"==typeof this.layout){let e=await y(this.layout);if(!e)throw G.NotFound(`Layout not found. (${this.layout})`);this.layout=t?new e(i):new e}if(this.layout&&this.layout.areas&&Array.isArray(this.layout.areas)){this.components=this.components||[];for(let t of this.layout.areas)this.components.push({name:t.component,type:t.type})}},a=async()=>{t=await this.define()},s=async()=>{this.title=this.i18nValue(this.title)},n=async()=>{t.el="#"+this.name},r=async()=>{this.propsData&&(t.propsData=this.propsData)},o=async()=>{this.data&&("function"==typeof this.data?t.data=this.data():t.data=this.data)};return await i(),await a(),await s(),await n(),await r(),await o(),t}),h("protected"),h("override"),h("sealed"),this.onView=(async(t,e,i)=>{t();const a=await y("vue/vue{.min}.js");let s=await this.factory(),n=this.html||"";this.layout?i.innerHTML=await this.layout.merge(n):i.innerHTML=n,new a(s)}),h("protected"),this.el=null,h("protected"),this.propsData=null,h("protected"),this.layout=null})})(),await(async()=>{const{VueView:t}=await k("flair.ui");h("ns","flair.ui"),i("StaticView",t,function(){h("override"),this.construct=((t,e)=>{t(e),this.isStatic&&(this.layout=Xt.layout.static||null,this.basePath=this.staticRoot,this.localePath=this.basePath+"locales/",-1!==this.staticFile.indexOf("{.en}")&&(this.staticFile=this.staticFile.replace("{.en}","."+this.locale())))}),h("protected"),h("override"),this.loadStaticFile=(async(t,e)=>{t(e);let i=d("clientFile"),a="",s=null,n=null,r=null,o=null,l="",h=null,c=null,u=new DOMParser;if(a=await i(this.staticFile),r=(n=(s=u.parseFromString(a,"text/xml")).getElementsByTagName("page")[0]).getElementsByTagName("html")[0],h=n.getElementsByTagName("style")[0],c=n.getElementsByTagName("data")[0],this.title=n.getAttribute("title")||"",this.layout=n.getAttribute("layout")||Xt.static.layout||null,this.i18n=n.getAttribute("i18n")||Xt.static.i18n||null,this.style=h?h.firstChild.data.trim():null,this.data=c?JSON.parse(c.firstChild.data.trim()):null,o=r&&r.getAttribute("type")||"",l=r?r.firstChild.data.trim():"","md"===o){const t=await y("showdown/showdown{.min}.js");let e=new t.Converter(Xt.showdown);this.html=e.makeHtml(l)}else this.html=l})})})(),await(async()=>{const{VueComponentMembers:t}=await k("flair.ui");h("ns","flair.ui"),i("VueComponent",[t],function(){let t=this;this.factory=(async()=>{let e=await this.define();const i=async()=>{this.html&&(e.template=this.html.trim())},a=async()=>{this.props&&Array.isArray(this.props)&&(e.props=this.props)},s=async()=>{this.data&&("function"==typeof this.data?e.data=function(){return t.data()}:e.data=function(){return t.data})},n=async()=>{this.name&&(e.name=this.name)},r=async()=>{this.model&&(e.model=this.model)},o=async()=>{"boolean"==typeof this.inheritAttrs&&(e.inheritAttrs=this.inheritAttrs)};return await i(),await a(),await s(),await n(),await r(),await o(),e}),h("protectedSet"),this.name="",h("protected"),this.props=null,h("protected"),this.model=null,h("protected"),this.inheritAttrs=null})})(),await(async()=>{h("ns","flair.ui"),i("VueDirective",function(){h("virtual"),h("async"),this.factory=q})})(),await(async()=>{h("ns","flair.ui"),i("VueFilter",function(){h("virtual"),h("async"),this.factory=q})})(),await(async()=>{const{ViewHandler:t}=await k("flair.ui");h("ns","flair.ui"),i("VueLayout",function(){let e=et();h("virtual"),this.construct=(t=>{if(t){let e=0,i=!1,a=t.length;for(;1&&!(e>=a);){let s=t.indexOf("[[",e);if(-1===s)break;let n=t.indexOf("]]",s);if(-1===n&&s+1<a){t="[[view]]",this.viewArea="view";break}e=n+1;let r,o=t.substr(s+2,n-s-2).split(":");1===o.length?i||(i=!0,this.viewArea=o[0].trim()):3===o.length&&(this.areas.push({area:o[0].trim(),component:o[1].trim(),type:o[2].trim()}),t=t.substr(0,s+2)+o[0].trim()+t.substr(n))}this.html=t}else this.viewArea=Xt.layout.viewAreaEl||"view"}),this.merge=(async i=>{let a="",s=d("clientFile");const n=async()=>{if(!this.baseName){let t=this.$Type.getName(),e=t.substr(t.lastIndexOf(".")+1);this.baseName=e}this.basePath||(this.basePath=this.$Type.getAssembly().assetsPath())},r=async()=>{const t=t=>{if("string"==typeof t&&t.startsWith("res:")){let e=t.substr(4),i=l.context.current().getResource(e)||null;return i?i.data:t}return t};"boolean"==typeof this.style&&!0===this.style?this.style=ot(`./${this.baseName}/index{.min}.css`,!0):this.style=t(this.style),"boolean"==typeof this.html&&!0===this.html?this.html=ot(`./${this.baseName}/index{.min}.html`,!0):this.html=t(this.html)},o=async()=>{"string"==typeof this.style&&this.style.endsWith(".css")&&(this.style=this.style.replace("./",this.basePath),this.style=await s(this.style)),this.style&&(this.style=at(this.style,"#SCOPE_ID",`#${e}`),t.addStyle(e,this.style))},h=async()=>{"string"==typeof this.html&&this.html.endsWith(".html")&&(this.html=this.html.replace("./",this.basePath),this.html=await s(this.html)),this.html=`<div id="${e}">${this.html}</div>`},c=async()=>{if((a=this.html)&&this.areas&&Array.isArray(this.areas))for(let t of this.areas)a=at(a,`[[${t.area}]]`,`<component is="${t.component}"></component>`)},u=async()=>{a&&(a=a.replace(`[[${this.viewArea}]]`,i))};return await n(),await r(),await o(),await h(),await c(),await u(),a}),h("readonly"),this.id=e,h("protected"),this.baseName="",h("protected"),this.basePath="",h("protected"),this.html=null,h("protected"),this.style=null,h("protected"),h("readonly"),this.viewArea="",h("protectedSet"),this.areas=[]})})(),await(async()=>{h("ns","flair.ui"),i("VueMixin",function(){h("virtual"),h("async"),this.factory=q})})(),await(async()=>{h("ns","flair.ui"),i("VuePlugin",function(){h("virtual"),h("async"),this.factory=q})})(),await(async()=>{const{Bootware:t}=await k("flair.app");h("ns","flair.boot"),i("VueSetup",t,function(){h("override"),this.construct=(t=>{t("Vue Setup")}),h("override"),this.boot=(async t=>{t();const e=await y("vue/vue{.min}.js"),{VueComponent:i,VueDirective:a,VueFilter:s,VueMixin:n,VuePlugin:r}=await k("flair.ui");let o=Xt.vue.extensions,l=null,h=null;for(let t of o){if(!t.name)throw G.OperationFailed(`Extension name cannot be empty. (${t.type})`);if(!t.type)throw G.OperationFailed(`Extension type cannot be empty. (${t.name})`);if(l=await y(t.type),b(l,i))try{if(h=new l,e.options.components[t.name])throw G.Duplicate(`Component already registered. (${t.name})`);e.component(t.name,await h.factory())}catch(e){throw G.OperationFailed(`Component registration failed. (${t.type})`,e)}else if(b(l,a))try{h=new l,e.directive(t.name,await h.factory())}catch(e){throw G.OperationFailed(`Directive registration failed. (${t.type})`,e)}else if(b(l,s))try{h=new l,e.filter(t.name,await h.factory())}catch(e){throw G.OperationFailed(`Filter registration failed. (${t.type})`,e)}else if(b(l,n))try{h=new l,e.mixin(await h.factory())}catch(e){throw G.OperationFailed(`Mixin registration failed. (${t.type})`,e)}else{if(!b(l,r))throw G.InvalidArgument(t.type);try{h=new l(t.name),e.use(await h.factory(),t.options||{})}catch(e){throw G.OperationFailed(`Plugin registration failed. (${t.type})`,e)}}}})})})(),l.context.current().currentAssemblyBeingLoaded(),l.registerAdo('{"name":"flair.client.vue","file":"./flair.client.vue{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.59.0","lupdate":"Thu, 05 Sep 2019 01:06:45 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.ui.VueComponentMembers","flair.ui.VueView","flair.ui.StaticView","flair.ui.VueComponent","flair.ui.VueDirective","flair.ui.VueFilter","flair.ui.VueLayout","flair.ui.VueMixin","flair.ui.VuePlugin","flair.boot.VueSetup"],"resources":[],"assets":[],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.client.vue",settings:Xt,config:Zt})});