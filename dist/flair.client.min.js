/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.client
 *     File: ./flair.client.js
 *  Version: 0.55.76
 *  Fri, 30 Aug 2019 14:16:57 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.client"]=e}(this,async function(t,e){"use strict";const{Class:i,Struct:s,Enum:a,Interface:n,Mixin:r,Aspects:o,AppDomain:l,$$:h,attr:c,bring:u,Container:d,include:p,Port:m,on:f,post:y,telemetry:w,Reflector:v,Serializer:g,Tasks:$,as:b,is:V,isDefined:x,isComplies:A,isDerivedFrom:O,isAbstract:C,isSealed:T,isStatic:F,isSingleton:D,isDeprecated:S,isImplements:I,isInstanceOf:L,isMixed:E,getAssembly:P,getAttr:j,getContext:M,getResource:W,getRoute:N,getType:U,ns:R,getTypeOf:k,getTypeName:B,typeOf:H,dispose:_,using:z,Args:J,Exception:q,noop:G,nip:K,nim:Q,nie:X,event:Y}=t,{TaskInfo:Z}=t.Tasks,{env:tt}=t.options,{guid:et,stuff:it,replaceAll:st,splitAndTrim:at,findIndexByProp:nt,findItemByProp:rt,which:ot,isArrowFunc:lt,isASyncFunc:ht,sieve:ct,deepMerge:ut,getLoadedScript:dt,b64EncodeUnicode:pt,b64DecodeUnicode:mt,lens:ft,globalSetting:yt}=t.utils,{$$static:wt,$$abstract:vt,$$virtual:gt,$$override:$t,$$sealed:bt,$$private:Vt,$$privateSet:xt,$$protected:At,$$protectedSet:Ot,$$readonly:Ct,$$async:Tt,$$overload:Ft,$$enumerate:Dt,$$dispose:St,$$post:It,$$on:Lt,$$timer:Et,$$type:Pt,$$args:jt,$$inject:Mt,$$resource:Wt,$$asset:Nt,$$singleton:Ut,$$serialize:Rt,$$deprecate:kt,$$session:Bt,$$state:Ht,$$conditional:_t,$$noserialize:zt,$$ns:Jt}=h,qt=tt.isServer||tt.isWorker?null:(!0).document,Gt=l.context.current().name,Kt=e,Qt=Kt.substr(0,Kt.lastIndexOf("/")+1);l.loadPathOf("flair.client",Qt);let Xt=JSON.parse('{"view":{"el":"main","title":"","transition":""},"routes":{"home":"","notfound":""},"ui":{"vue":{"extensions":[]}},"i18n":{"lang":{"default":"en","locales":[{"code":"en","name":"English","native":"English"}]}},"routing":{"mounts":{"main":"/"},"main-settings":[{"name":"hashbang","value":false},{"name":"lang","value":false},{"name":"sensitive","value":false}],"main-interceptors":[]}}'),Yt=t.Port("settingsReader");if("function"==typeof Yt){let t=Yt("flair.client");t&&(Xt=ut([Xt,t],!1))}Xt=Object.freeze(Xt);let Zt=JSON.parse("{}");Zt=Object.freeze(Zt);let te=()=>{};return l.context.current().currentAssemblyBeingLoaded("./flair.client{.min}.js"),await(async()=>{const t=await p("flair.app.Handler");h("ns","flair.ui"),i("ViewHandler",t,function(){let t="",e={};h("override"),this.construct=((e,i,s,a)=>{e(),i=i||Xt.view.el||"main",s=s||Xt.view.title||"",a=a||Xt.view.transition||"",t=i,this.viewTransition=a,this.title=this.title+(s?" - "+s:"")}),h("privateSet"),this.viewTransition="",h("protectedSet"),this.name="",h("protectedSet"),this.title="",h("protectedSet"),this.meta=null,h("protected"),h("virtual"),h("async"),this.beforeLoad=G,h("protected"),h("virtual"),h("async"),this.afterLoad=G,h("protected"),h("virtual"),h("async"),this.loadData=G,h("protected"),this.cancelLoadData=(async()=>{let t=null;for(let i in e)try{(t=e[i]).abort()}catch(t){}e={},await this.onCancelLoadData()}),h("protected"),this.abortHandle=(t=>{t=t||et();let i=new AbortController;return e[t]=i,i}),h("protected"),this.abort=(t=>{try{let i;e[t].abort()}catch(t){}}),h("protected"),h("virtual"),h("async"),this.onCancelLoadData=G,this.view=(async e=>{const{ViewTransition:i}=R("flair.ui");if(this.name=this.name||this.$Type.getName(!0),this.$static.loadingViewName=this.name,this.viewTransition){let t=b(await p(this.viewTransition),i);this.viewTransition=t?new t:""}let s=null,a=qt.getElementById(t);this.$static.currentViewName!==this.name?((s=qt.createElement("div")).id=this.name,s.setAttribute("hidden",""),a.appendChild(s)):s=qt.getElementById(this.name),await this.beforeLoad(e,s),await this.onView(e,s),await this.afterLoad(e,s),await this.swap(),this.loadData(e)}),h("protected"),h("virtual"),h("async"),this.onView=G,h("private"),this.swap=(async()=>{let e=qt.getElementById(this.name);if(this.$static.currentViewName){let i=qt.getElementById(this.$static.currentViewName);if(this.$static.currentViewCancelLoadData(),this.$static.currentViewName!==this.name){if(this.$static.currentViewMeta)for(let t of this.$static.currentViewMeta)qt.head.removeChild(qt.querySelector('meta[name="'+t+'"]'));this.$static.removeStyles(),this.viewTransition?(await this.viewTransition.leave(i,e),await this.viewTransition.enter(e,i)):(i&&(i.hidden=!0),e.hidden=!1);let s=qt.getElementById(t);i&&s.removeChild(i)}}if(this.$static.currentViewName!==this.name){if(this.meta)for(let t of this.meta){var i=document.createElement("meta");for(let e in t)i[e]=t[e];qt.head.appendChild(i)}!this.$static.currentViewName&&e&&(e.hidden=!1)}qt.title=this.title,this.$static.currentViewName=this.name,this.$static.loadingViewName=null,this.$static.currentViewMeta=this.meta,this.$static.currentViewCancelLoadData=this.cancelLoadData}),h("static"),this.currentViewName=null,h("static"),this.currentViewMeta=null,h("static"),this.currentViewCancelLoadData=null,h("static"),this.loadingViewName=null,h("static"),this.removeStyles=function(){if(this.currentViewName){let t=document.head.getElementsByTagName("style"),e=this.currentViewName;for(let i of t)i.id&&i.id.startsWith(`_${e}_style_`)&&document.head.removeChild(i)}},h("static"),this.addStyle=function(t,e){if(this.loadingViewName){let i=(!0).document.createElement("style");i.id=`_${this.loadingViewName}_style_${t}`,i.type="text/css",i.appendChild((!0).document.createTextNode(e)),(!0).document.head.appendChild(i)}}})})(),await(async()=>{h("sealed"),h("ns","flair.ui"),i("Page",function(){let t=[],e;this.construct=(t=>{this.hasbang=t.hasbang||!1,this.lang=t.lang||!1,this.base=t.base||"",this.sensitive=t.sensitive||!1,this.base.endsWith("/")&&(this.base=this.base.substr(0,this.base.length-1)),this.base.startsWith("/")||(this.base="/"+this.base)}),h("readonly"),this.hasbang=!1,h("readonly"),this.lang=!1,h("readonly"),this.base="",h("readonly"),this.sensitive=!1,h("private"),this.pathToRegExp=((t,e)=>{t.startsWith("/")&&(t=t.substr(1)),t.endsWith("/")&&(t=t.substr(0,t.length-1));let i=t?t.split("/"):[],s="",a=0;for(let t of i)(t=t.trim()).startsWith(":")?(e.push({name:t.substr(1),index:a}),s+="/.[^/]*"):s+="/"+t,a++;s+="/";let n=null;return n=this.sensitive?new RegExp(s):new RegExp(s,"i")}),this.breakUrl=(e=>{let i={url:e,path:"",loc:"",params:{},handler:null,route:null},s=e;if("/"===s.substr(0,1)&&(s=s.substr(1)),"#!/"===s.substr(0,3)&&(s=s.substr(3)),"#!"===s.substr(0,2)&&(s=s.substr(2)),"#/"===s.substr(0,2)&&(s=s.substr(2)),"#"===s.substr(0,1)&&(s=s.substr(1)),"/"===s.substr(0,1)&&(s=s.substr(1)),(s="/"+s).startsWith(this.base)&&(s=s.substr(this.base.length)),this.lang){s.startsWith("/")&&(s=s.substr(1));let t=s.split("/");if(t.length>0){let e=t[0].trim();-1!==l.host().supportedLocales.indexOf(e)&&(i.loc=e),t.shift(),(s=t.join("/")).startsWith("/")||(s="/"+s)}}s.startsWith("/")||(s="/"+s);let a=s.indexOf("?"),n="",r=null;if(-1!==a){n=s.substr(a+1),s=s.substr(0,a);let t=n.split("&"),e=null;for(let i of t)e=i.split("="),(r=r||{})[e[0].trim()]=decodeURIComponent(e[1].trim())}s.endsWith("/")||(s+="/"),i.path=s;for(let e of t){let t=e.regex.exec(decodeURIComponent(s));if(t&&t.input===t[0]){s.startsWith("/")&&(s=s.substr(1)),s.endsWith("/")&&(s=s.substr(0,s.length-1));let t=s?s.split("/"):[];for(let s of e.keys)i.params[s.name]=t[s.index];i.handler=e.handler,i.route=e.route;break}}return r&&(i.params=Object.assign(i.params,r)),i}),this.buildUrl=((t,e)=>{let i=this.base;if(i.endsWith("/")||(i+="/"),this.lang&&(i+=l.host().currentLocale+"/"),t.startsWith("/")&&(t=t.substr(1)),(i+=t).startsWith("/")||(i="/"+i),(i=this.hasbang?"#!"+i:"#"+i).endsWith("/")||(i+="/"),e){let t=-1,s="?",a=null;for(let n in e)e.hasOwnProperty(n)&&(t=i.indexOf(`:${n}`),a=encodeURIComponent(e[n].toString()),-1!==t?i=st(i,`:${n}`,a):s+=`${n}=${a}`);"?"!==s&&(i+=s)}return i}),this.rebuildUrl=(t=>{let e=this.breakUrl(t);return this.buildUrl(e.path,e.params)}),this.add=((e,i)=>{let s=[];t.push({route:e,path:e.path,keys:s,regex:this.pathToRegExp(e.path,s),handler:i})}),this.add404=(t=>{e=t}),this.run=(async t=>{let i={$url:t,$page:"",$route:"",$handler:"",$mount:"",$path:"",$stop:!1,$redirect:{route:"",params:{}}},s=this.breakUrl(t),a=s.loc,n=s.params;s.route?(i.$route=s.route.name,i.$handler=s.route.handler,i.$mount=s.route.mount,i.$path=s.route.path):i.$path=s.path,n&&(i=Object.assign(i,n));try{if(s.handler){if(this.lang&&l.host().locale(a),await s.handler(i),i.$redirect.route){let t=i.$redirect,e=i.$params;setTimeout(()=>{l.host().redirect(t,e)},0)}}else await e(i)}catch(t){l.host().raiseError(t)}})})})(),await(async()=>{const{ViewHandler:t}=R("flair.ui");h("ns","flair.ui.vue"),r("VueComponentMembers",function(){var e=this,i=et();h("private"),this.define=(async()=>{const s=await p("vue/vue{.min}.js"),{ViewState:a}=R("flair.ui"),{VueFilter:n,VueMixin:r,VueDirective:o,VueComponent:l}=R("flair.ui.vue");let h=new a,c={},u=m("clientFile");if(this.style&&this.style.endsWith(".css")&&(this.style=this.$Type.getAssembly().getAssetFilePath(this.style),this.style=await u(this.style)),this.style&&(this.style=st(this.style,"#SCOPE_ID",`#${i}`),t.addStyle(i,this.style)),this.html&&this.html.endsWith(".html")&&(this.html=this.$Type.getAssembly().getAssetFilePath(this.html),this.html=await u(this.html)),this.html=`<div id="${i}">${this.html}</div>`,this.i18n){let t="";for(let e in this.i18n)this.i18n.hasOwnProperty(e)&&(t=this.$Type.getAssembly().getLocaleFilePath(this.locale(),this.i18n[e]),this.i18n[e]=await u(t))}if(this.render&&"function"==typeof this.render&&(c.render=this.render),"boolean"==typeof this.functional&&(c.functional=this.functional),this.computed)for(let t in this.computed)this.computed.hasOwnProperty(t)&&(c.computed=c.computed||{},c.computed[t]=this.computed[t]);if(this.state&&Array.isArray(this.state))for(let t of this.state){if(c.computed[t.name])throw q.InvalidDefinition(`Computed (state) property already defined. (${t.name})`);c.computed=c.computed||{},c.computed[t.name]={get:function(){return h.get(t.path,t.name)||t.value},set:function(e){h.set(t.path,t.name,e)}}}if(this.methods)for(let t in this.methods)this.methods.hasOwnProperty(t)&&(c.methods=c.methods||{},c.methods[t]=this.methods[t]);if(c.methods=c.methods||{},c.methods["path"]=((t,i)=>e.path(t,i)),c.methods=c.methods||{},c.methods["route"]=((t,i)=>e.route(t,i)),c.methods=c.methods||{},c.methods["stuff"]=((t,...e)=>it(t,e)),this.i18n&&(c.methods["locale"]=(t=>e.locale(t)),c.methods["i18n"]=((t,i,s)=>(tt.isDebug&&s&&(s=":"+s+":"),e.i18n&&e.i18n[t]&&e.i18n[t][i]?e.i18n[t][i]||s||"(i18n: 404)":s||"(i18n: 404)"))),this.watch)for(let t in this.watch)this.watch.hasOwnProperty(t)&&(c.watch=c.watch||{},c.watch[t]=this.watch[t]);if(this.lifecycle)for(let t in this.lifecycle)this.lifecycle.hasOwnProperty(t)&&(c[t]=this.lifecycle[t]);if(this.components&&Array.isArray(this.components)){let t=null,e=null;for(let i of this.components){if(!i.name)throw q.OperationFailed(`Component name cannot be empty. (${i.type})`);if(!i.type)throw q.OperationFailed(`Component type cannot be empty. (${i.name})`);if(s.options.components[i.name])throw q.Duplicate(`Component already registered. (${i.name})`);if(!(t=b(await p(i.type),l)))throw q.InvalidArgument(i.type);try{if(e=new t,c.components&&c.components[i.name])throw q.Duplicate(`Component already registered. (${i.name})`);c.components=c.components||{},c.components[i.name]=await e.factory()}catch(t){throw q.OperationFailed(`Component registration failed. (${i.type})`,t)}}}if(this.mixins&&Array.isArray(this.mixins)){let t=null,e=null;for(let i of this.mixins){if(!i.name)throw q.OperationFailed(`Mixin name cannot be empty. (${i.type})`);if(!i.type)throw q.OperationFailed(`Mixin type cannot be empty. (${i.name})`);if(!(t=b(await p(i.type),r)))throw q.InvalidArgument(i.type);try{if(e=new t,c.mixins&&c.mixins[i.name])throw q.Duplicate(`Mixin already registered. (${i.name})`);c.mixins=c.mixins||{},c.mixins[i.name]=await e.factory()}catch(t){throw q.OperationFailed(`Mixin registration failed. (${i.type})`,t)}}}if(this.directives&&Array.isArray(this.directives)){let t=null,e=null;for(let i of this.directives){if(!i.name)throw q.OperationFailed(`Directive name cannot be empty. (${i.type})`);if(!i.type)throw q.OperationFailed(`Directive type cannot be empty. (${i.name})`);if(!(t=b(await p(i.type),o)))throw q.InvalidArgument(i.type);try{if(e=new t,c.directives&&c.directives[i.name])throw q.Duplicate(`Directive already registered. (${i.name})`);c.directives=c.directives||{},c.directives[i.name]=await e.factory()}catch(t){throw q.OperationFailed(`Directive registration failed. (${i.type})`,t)}}}if(this.filters&&Array.isArray(this.filters)){let t=null,e=null;for(let i of this.filters){if(!i.name)throw q.OperationFailed(`Filter name cannot be empty. (${i.type})`);if(!i.type)throw q.OperationFailed(`Filter type cannot be empty. (${i.name})`);if(!(t=b(await p(i.type),n)))throw q.InvalidArgument(i.type);try{if(e=new t,c.filters&&c.filters[i.name])throw q.Duplicate(`Filter already registered. (${i.name})`);c.filters=c.filters||{},c.filters[i.name]=await e.factory()}catch(t){throw q.OperationFailed(`Filter registration failed. (${i.type})`,t)}}}return this.provide&&Array.isArray(this.provide)&&(c.provide=this.provide),this.inject&&Array.isArray(this.inject)&&(c.inject=this.inject),c}),h("readonly"),this.id=i,h("protected"),this.locale=(t=>l.host().locale(t)),h("protected"),this.path=((t,e)=>l.host().pathToUrl(t,e)),h("protected"),this.route=((t,e)=>l.host().routeToUrl(t,e)),h("protected"),this.i18n=null,h("protected"),this.style="",h("protected"),this.html="",h("protected"),this.template=null,h("protected"),this.render=null,h("protected"),this.functional=!1,h("protected"),this.computed=null,h("protected"),this.state=null,h("protected"),this.methods=null,h("protected"),this.watch=null,h("protected"),this.lifecycle=null,h("protected"),this.components=null,h("protected"),this.mixins=null,h("protected"),this.directives=null,h("protected"),this.filters=null,h("protected"),this.provide=null,h("protected"),this.inject=null})})(),await(async()=>{const t=await p("flair.app.Host"),{ViewHandler:e,Page:s}=R("flair.ui");h("sealed"),h("ns","flair.app"),i("ClientHost",t,function(){let t={},i=null;h("override"),this.construct=(t=>{t("Client")}),this.app={get:()=>this.mounts["main"].app,set:G},this.mounts={get:()=>t,set:G},h("state"),h("private"),this.currentLocale=Xt.i18n.lang.default,this.defaultLocale={get:()=>Xt.i18n.lang.default,set:G},this.supportedLocales={get:()=>Xt.i18n.lang.locales.slice(),set:G},this.locale=((t,e)=>{if(t&&this.currentLocale!==t&&(this.currentLocale=t,e)){let t,e=this((!0).location.hash).rebuildUrl((!0).location.hash);this.go(e)}return this.currentLocale}),this.routeToUrl=((t,e)=>{if(!t)return null;let i=l.context.current().getRoute(t),s;return i?this.mounts[i.mount].app.buildUrl(i.path,e):st(t,".","_")}),this.pathToUrl=((t,e)=>{let i;return this.urlToApp(t).buildUrl(t,e)}),h("private"),this.urlToApp=(t=>{"#!/"===t.substr(0,3)&&(t=t.substr(3)),"#!"===t.substr(0,2)&&(t=t.substr(2)),t.startsWith("/")||(t="/"+t);let e=null;for(let i in this.mounts)this.mounts.hasOwnProperty(i)&&t.startsWith(i.base)&&i.base.length>e.base.length&&(e=i);return e?e.app:this.app}),this.view={get:()=>e.currentView,set:G},this.redirect=(async(t,e,i)=>{await this.navigate(t,e,!0),i&&await this.refresh()}),this.navigate=(async(t,e,i)=>{e=e||{};let s=this.routeToUrl(t,e);s?await this.go(s,i):this.raiseError(q.NotFound(t,this.navigate))}),this.go=(async(t,e)=>{e?history.replaceState(null,null,(!0).document.location.pathname+t):("#"===t.substr(0,1)&&(t=t.substr(1)),window.location.hash=t)}),this.refresh=(async()=>{setTimeout(()=>{i()},0)}),h("override"),this.boot=(async e=>{e();let i={},a=null;const n=t=>{let e=Xt.routing[`${t}-settings`];if(e&&e.length>0)for(let t of e)i[t.name]=t.value;return i.base=Xt.routing.mounts[t],i};i=n("main");let r=new s(i);for(let e of Object.keys(Xt.routing.mounts))"main"===e?a=r:(i=n(e),a=new s(i)),t[e]=Object.freeze({name:e,root:a.base,app:a});t=Object.freeze(t)}),h("override"),this.start=(async t=>{t(),i=(async()=>{let t=this.urlToApp((!0).location.hash);await t.run((!0).location.hash)})}),h("override"),this.ready=(async t=>{t(),(!0).addEventListener("hashchange",i),Xt.routes.home&&await this.redirect(Xt.routes.home,{},!0),console.log(`${l.app().info.name}, v${l.app().info.version}`)}),h("override"),this.stop=(async t=>{t(),(!0).removeEventListener("hashchange",i)}),h("override"),this.dispose=(e=>{e(),t=null})})})(),await(async()=>{const t=await p("flair.app.Bootware");h("ns","flair.boot.vue"),i("VueSetup",t,function(){h("override"),this.construct=(t=>{t("Vue Setup")}),h("override"),this.boot=(async t=>{t();const e=await p("vue/vue{.min}.js"),{VueComponent:i,VueDirective:s,VueFilter:a,VueMixin:n,VuePlugin:r}=R("flair.ui.vue");let o=Xt.ui.vue.extensions,l=null,h=null;for(let t of o){if(!t.name)throw q.OperationFailed(`Extension name cannot be empty. (${t.type})`);if(!t.type)throw q.OperationFailed(`Extension type cannot be empty. (${t.name})`);if(l=await p(t.type),b(l,i))try{if(h=new l,e.options.components[t.name])throw q.Duplicate(`Component already registered. (${t.name})`);e.component(t.name,await h.factory())}catch(e){throw q.OperationFailed(`Component registration failed. (${t.type})`,e)}else if(b(l,s))try{h=new l,e.directive(t.name,await h.factory())}catch(e){throw q.OperationFailed(`Directive registration failed. (${t.type})`,e)}else if(b(l,a))try{h=new l,e.filter(t.name,await h.factory())}catch(e){throw q.OperationFailed(`Filter registration failed. (${t.type})`,e)}else if(b(l,n))try{h=new l,e.mixin(await h.factory())}catch(e){throw q.OperationFailed(`Mixin registration failed. (${t.type})`,e)}else{if(!b(l,r))throw q.InvalidArgument(t.type);try{h=new l(t.name),e.use(await h.factory(),t.options||{})}catch(e){throw q.OperationFailed(`Plugin registration failed. (${t.type})`,e)}}}})})})(),await(async()=>{h("ns","flair.ui"),i("ViewInterceptor",function(){h("virtual"),h("async"),this.run=G})})(),await(async()=>{h("singleton"),h("ns","flair.ui"),i("ViewState",function(){h("state"),h("private"),this.store={},this.get=((t,e)=>(t=t||"",e=e||"",this.store[t+"/"+e]||null)),this.set=((t,e,i)=>{t=t||"",e=e||"","boolean"==typeof i||i?this.store[t+"/"+e]=i:delete this.store[t+"/"+e]}),this.clear=(()=>{this.store=null})})})(),await(async()=>{h("ns","flair.ui"),i("ViewTransition",function(){h("virtual"),h("async"),this.enter=G,h("virtual"),h("async"),this.leave=G})})(),await(async()=>{const t=await p("flair.app.Bootware");h("sealed"),h("ns","flair.boot"),i("ClientRouter",t,function(){const{ViewHandler:t,ViewInterceptor:e}=R("flair.ui");let i=null;h("override"),this.construct=(t=>{t("Client Router",!0)}),h("override"),this.boot=(async(s,a)=>{s(),i||(i=l.context.current().allRoutes(!0)).sort((t,e)=>t.index<e.index?-1:t.index>e.index?1:0);const n=async(e,i)=>{let s=b(await p(e),t);if(!s)throw q.InvalidDefinition(`Invalid route handler. (${e})`);{let t=new s;await t.view(i)}},r=t=>"string"==typeof t.handler?t.handler:t.handler[l.app().getRoutingContext(t.name)]||"**undefined**",o=function(t){return async i=>{let s=Xt.routing[`${a.name}-interceptors`]||[];for(let t of s){let s=b(await p(t),e);if(!s)throw q.InvalidDefinition(`Invalid interceptor type. (${t})`);if(await(new s).run(i),i.$stop)break}if(!i.$stop){let e=r(t);await n(e,i)}}};let h=a.app;for(let t of i)("string"==typeof t.mount&&t.mount===a.name||-1!==t.mount.indexOf(a.name))&&t.name!==Xt.routes.notfound&&h.add(t,o(t));h.add404(async t=>{let e=Xt.routes.notfound;e&&(e=l.context.current().getRoute(e)),e?await n(e.handler,t):setTimeout(()=>{(!0).history.back()},0)})})})})(),await(async()=>{const{VueComponentMembers:t}=R("flair.ui.vue");h("ns","flair.ui.vue"),i("VueComponent",[t],function(){this.factory=(async()=>{let t=await this.define();if(this.html&&(t.template=this.html.trim()),this.props&&Array.isArray(this.props)&&(t.props=this.props),this.data){let e=this;"function"==typeof this.data?t.data=function(){return e.data()}:t.data=function(){return e.data}}return this.name&&(t.name=this.name),this.model&&(t.model=this.model),"boolean"==typeof this.inheritAttrs&&(t.inheritAttrs=this.inheritAttrs),t}),h("protectedSet"),this.name="",h("protected"),this.props=null,h("protected"),this.data=null,h("protected"),this.model=null,h("protected"),this.inheritAttrs=null})})(),await(async()=>{h("ns","flair.ui.vue"),i("VueDirective",function(){h("virtual"),h("async"),this.factory=G})})(),await(async()=>{h("ns","flair.ui.vue"),i("VueFilter",function(){h("virtual"),h("async"),this.factory=G})})(),await(async()=>{const{ViewHandler:t}=R("flair.ui");h("ns","flair.ui.vue"),i("VueLayout",function(){let e=et();h("readonly"),this.id=e,h("protected"),this.html="",h("protected"),this.style="",h("protected"),this.viewArea="view",h("protectedSet"),this.areas=[],this.merge=(async i=>{let s=m("clientFile");this.style&&this.style.endsWith(".css")&&(this.style=this.$Type.getAssembly().getAssetFilePath(this.style),this.style=await s(this.style)),this.style&&(this.style=st(this.style,"#SCOPE_ID",`#${e}`),t.addStyle(e,this.style)),this.html&&this.html.endsWith(".html")&&(this.html=this.$Type.getAssembly().getAssetFilePath(this.html),this.html=await s(this.html)),this.html=`<div id="${e}">${this.html}</div>`;let a=this.html;if(this.areas&&Array.isArray(this.areas))for(let t of this.areas)a=st(a,`[[${t.area}]]`,`<component is="${t.component}"></component>`);return a=a.replace(`[[${this.viewArea}]]`,i)})})})(),await(async()=>{h("ns","flair.ui.vue"),i("VueMixin",function(){h("virtual"),h("async"),this.factory=G})})(),await(async()=>{h("ns","flair.ui.vue"),i("VuePlugin",function(){h("virtual"),h("async"),this.factory=G})})(),await(async()=>{const{ViewHandler:t}=R("flair.ui"),{VueComponentMembers:e}=R("flair.ui.vue");h("ns","flair.ui.vue"),i("VueView",t,[e],function(){h("private"),this.factory=(async()=>{if(this.layout&&this.layout.areas&&Array.isArray(this.layout.areas)){this.components=this.components||[];for(let t of this.layout.areas)this.components.push({name:t.component,type:t.type})}let t=await this.define();return t.el="#"+this.name,this.propsData&&(t.propsData=this.propsData),this.data&&("function"==typeof this.data?t.data=this.data():t.data=this.data),t}),h("protected"),h("override"),h("sealed"),this.onView=(async(t,e,i)=>{t();const s=await p("vue/vue{.min}.js");let a=await this.factory(),n=this.html||"";this.layout?i.innerHTML=await this.layout.merge(n):i.innerHTML=n,new s(a)}),h("protected"),this.el=null,h("protected"),this.propsData=null,h("protected"),this.data=null,h("protected"),this.layout=null})})(),l.context.current().currentAssemblyBeingLoaded(""),l.registerAdo('{"name":"flair.client","file":"./flair.client{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.76","lupdate":"Fri, 30 Aug 2019 14:16:57 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.ui.ViewHandler","flair.ui.Page","flair.ui.vue.VueComponentMembers","flair.app.ClientHost","flair.boot.vue.VueSetup","flair.ui.ViewInterceptor","flair.ui.ViewState","flair.ui.ViewTransition","flair.boot.ClientRouter","flair.ui.vue.VueComponent","flair.ui.vue.VueDirective","flair.ui.vue.VueFilter","flair.ui.vue.VueLayout","flair.ui.vue.VueMixin","flair.ui.vue.VuePlugin","flair.ui.vue.VueView"],"resources":[],"assets":[],"routes":[]}'),Object.freeze({name:"flair.client",settings:Xt,config:Zt})});