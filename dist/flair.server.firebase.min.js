/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.server.firebase
 *     File: ./flair.server.firebase.js
 *  Version: 0.59.54
 *  Sat, 21 Sep 2019 20:24:32 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,s){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>s):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),module.exports=exports=s):e["flair.server.firebase"]=s}(this,async function(e,s){"use strict";const{Class:t,Struct:i,Enum:r,Interface:n,Mixin:a,Aspects:o,AppDomain:p,$$:c,attr:f,bring:l,Container:u,include:d,Port:b,on:m,post:g,telemetry:v,Reflector:A,Serializer:y,Tasks:h,as:O,is:S,isDefined:C,isComplies:I,isDerivedFrom:j,isAbstract:x,isSealed:T,isStatic:F,isSingleton:E,isDeprecated:P,isImplements:R,isInstanceOf:B,isMixed:D,getAssembly:J,getAttr:k,getContext:z,getResource:L,getRoute:M,getType:N,ns:_,getTypeOf:G,getTypeName:q,typeOf:w,dispose:U,using:V,Args:$,Exception:W,noop:H,nip:K,nim:Q,nie:X,event:Y}=e,{TaskInfo:Z}=e.Tasks,{env:ee}=e.options,{guid:se,stuff:te,replaceAll:ie,splitAndTrim:re,findIndexByProp:ne,findItemByProp:ae,which:oe,isArrowFunc:pe,isASyncFunc:ce,sieve:fe,deepMerge:le,getLoadedScript:ue,b64EncodeUnicode:de,b64DecodeUnicode:be,lens:me,globalSetting:ge}=e.utils,ve=ee.isServer||ee.isWorker?null:(!0).document,Ae=p.context.current().name,ye=s,he=ye.substr(0,ye.lastIndexOf("/")+1);p.loadPathOf("flair.server.firebase",he);let Oe=JSON.parse('{"firebase":{"firebaseApps":"","serviceAccount":""}}'),Se=b("settingsReader");if("function"==typeof Se){let e=Se("flair.server.firebase");e&&(Oe=le([Oe,e],!1))}Oe=Object.freeze(Oe);let Ce=JSON.parse("{}");return Ce=Object.freeze(Ce),p.context.current().currentAssemblyBeingLoaded("./flair.server.firebase{.min}.js"),await(async()=>{c("ns","flair.app"),a("FirebaseApp",function(){const e=require("firebase-admin");c("private"),this.apps={},c("private"),this.fbConfig=null;let s=null;this.projectId={get:()=>(s||(s=process.env.FIREBASE_PROJECT_ID||"")||(e.initializeApp(),s=process.env.GCLOUD_PROJECT||JSON.parse(process.env.FIREBASE_CONFIG).projectId||process.env.GCP_PROJECT),s)},this.firebase=(s=>{if(!this.apps[s]){this.fbConfig||(this.fbConfig=require(p.resolvePath(Oe.firebase.firebaseApps)));let t=this.fbConfig[this.projectId][s],i=require(p.resolvePath(Oe.firebase.serviceAccount));t["credential"]=e.credential.cert(i[this.projectId]),this.apps[s]=e.initializeApp(t,s)}return this.apps[s]})})})(),p.context.current().currentAssemblyBeingLoaded(),p.registerAdo('{"name":"flair.server.firebase","file":"./flair.server.firebase{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.59.54","lupdate":"Sat, 21 Sep 2019 20:24:32 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.FirebaseApp"],"resources":[],"assets":["main.js","start.js"],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.server.firebase",settings:Oe,config:Ce})});