/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.server.firebase
 *     File: ./flair.server.firebase.js
 *  Version: 0.55.77
 *  Sat, 31 Aug 2019 02:19:25 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,t){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>t):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):e["flair.server.firebase"]=t}(this,async function(e,t){"use strict";const{Class:s,Struct:i,Enum:r,Interface:n,Mixin:a,Aspects:o,AppDomain:p,$$:c,attr:f,bring:l,Container:$,include:d,Port:u,on:b,post:m,telemetry:g,Reflector:v,Serializer:A,Tasks:y,as:h,is:O,isDefined:S,isComplies:C,isDerivedFrom:I,isAbstract:x,isSealed:j,isStatic:T,isSingleton:F,isDeprecated:P,isImplements:E,isInstanceOf:R,isMixed:z,getAssembly:B,getAttr:D,getContext:J,getResource:k,getRoute:L,getType:M,ns:N,getTypeOf:_,getTypeName:G,typeOf:q,dispose:w,using:U,Args:V,Exception:W,noop:H,nip:K,nim:Q,nie:X,event:Y}=e,{TaskInfo:Z}=e.Tasks,{env:ee}=e.options,{guid:te,stuff:se,replaceAll:ie,splitAndTrim:re,findIndexByProp:ne,findItemByProp:ae,which:oe,isArrowFunc:pe,isASyncFunc:ce,sieve:fe,deepMerge:le,getLoadedScript:$e,b64EncodeUnicode:de,b64DecodeUnicode:ue,lens:be,globalSetting:me}=e.utils,{$$static:ge,$$abstract:ve,$$virtual:Ae,$$override:ye,$$sealed:he,$$private:Oe,$$privateSet:Se,$$protected:Ce,$$protectedSet:Ie,$$readonly:xe,$$async:je,$$overload:Te,$$enumerate:Fe,$$dispose:Pe,$$post:Ee,$$on:Re,$$timer:ze,$$type:Be,$$args:De,$$inject:Je,$$resource:ke,$$asset:Le,$$singleton:Me,$$serialize:Ne,$$deprecate:_e,$$session:Ge,$$state:qe,$$conditional:we,$$noserialize:Ue,$$ns:Ve}=c,We=ee.isServer||ee.isWorker?null:(!0).document,He=p.context.current().name,Ke=t,Qe=Ke.substr(0,Ke.lastIndexOf("/")+1);p.loadPathOf("flair.server.firebase",Qe);let Xe=JSON.parse('{"firebase":{"firebaseApps":"","serviceAccount":""}}'),Ye=e.Port("settingsReader");if("function"==typeof Ye){let e=Ye("flair.server.firebase");e&&(Xe=le([Xe,e],!1))}Xe=Object.freeze(Xe);let Ze=JSON.parse("{}");return Ze=Object.freeze(Ze),p.context.current().currentAssemblyBeingLoaded("./flair.server.firebase{.min}.js"),await(async()=>{c("ns","flair.app"),a("FirebaseApp",function(){const e=require("firebase-admin");c("private"),this.apps={},c("private"),this.fbConfig=null;let t=null;this.projectId={get:()=>(t||(t=process.env.FIREBASE_PROJECT_ID||"")||(e.initializeApp(),t=process.env.GCLOUD_PROJECT||JSON.parse(process.env.FIREBASE_CONFIG).projectId||process.env.GCP_PROJECT),t)},this.firebase=(t=>{if(!this.apps[t]){this.fbConfig||(this.fbConfig=require(p.resolvePath(Xe.firebase.firebaseApps)));let s=this.fbConfig[this.projectId][t],i=require(p.resolvePath(Xe.firebase.serviceAccount));s["credential"]=e.credential.cert(i[this.projectId]),this.apps[t]=e.initializeApp(s,t)}return this.apps[t]})})})(),p.context.current().currentAssemblyBeingLoaded(""),p.registerAdo('{"name":"flair.server.firebase","file":"./flair.server.firebase{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.77","lupdate":"Sat, 31 Aug 2019 02:19:25 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.FirebaseApp"],"resources":[],"assets":[],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.server.firebase",settings:Xe,config:Ze})});