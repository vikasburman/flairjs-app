/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.server.firebase
 *     File: ./flair.server.firebase.js
 *  Version: 0.60.21
 *  Wed, 25 Sep 2019 01:50:34 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,s){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>s):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),module.exports=exports=s):e["flair.server.firebase"]=s}(this,async function(e,s){"use strict";const{Class:t,Struct:i,Enum:r,Interface:n,Mixin:a,Aspects:o,AppDomain:p,$$:c,attr:f,InjectedArg:l,bring:d,Container:u,include:b,Port:m,on:g,post:v,telemetry:A,Reflector:y,Serializer:h,Tasks:O,as:I,is:j,isDefined:C,isComplies:S,isDerivedFrom:x,isAbstract:T,isSealed:F,isStatic:E,isSingleton:P,isDeprecated:R,isImplements:B,isInstanceOf:D,isMixed:J,getAssembly:k,getAttr:z,getContext:L,getResource:M,getRoute:N,getType:_,ns:G,getTypeOf:q,getTypeName:w,typeOf:U,dispose:V,using:W,Args:$,Exception:H,noop:K,nip:Q,nim:X,nie:Y,event:Z}=e,{TaskInfo:ee}=e.Tasks,{env:se}=e.options,{guid:te,stuff:ie,replaceAll:re,splitAndTrim:ne,findIndexByProp:ae,findItemByProp:oe,which:pe,isArrowFunc:ce,isASyncFunc:fe,sieve:le,deepMerge:de,getLoadedScript:ue,b64EncodeUnicode:be,b64DecodeUnicode:me,lens:ge,globalSetting:ve}=e.utils,Ae=se.isServer||se.isWorker?null:(!0).document,ye=p.context.current().name,he=s,Oe=he.substr(0,he.lastIndexOf("/")+1);p.loadPathOf("flair.server.firebase",Oe);let Ie=JSON.parse('{"firebase":{"firebaseApps":"","serviceAccount":""}}'),je=m("settingsReader");if("function"==typeof je){let e=je("flair.server.firebase");e&&(Ie=de([Ie,e],!1))}Ie=Object.freeze(Ie);let Ce=JSON.parse("{}");return Ce=Object.freeze(Ce),p.context.current().currentAssemblyBeingLoaded("./flair.server.firebase{.min}.js"),await(async()=>{c("ns","flair.app"),a("FirebaseApp",function(){const e=require("firebase-admin");c("private"),this.apps={},c("private"),this.fbConfig=null;let s=null;this.projectId={get:()=>(s||(s=process.env.FIREBASE_PROJECT_ID||"")||(e.initializeApp(),s=process.env.GCLOUD_PROJECT||JSON.parse(process.env.FIREBASE_CONFIG).projectId||process.env.GCP_PROJECT),s)},this.firebase=(s=>{if(!this.apps[s]){this.fbConfig||(this.fbConfig=require(p.resolvePath(Ie.firebase.firebaseApps)));let t=this.fbConfig[this.projectId][s],i=require(p.resolvePath(Ie.firebase.serviceAccount));t["credential"]=e.credential.cert(i[this.projectId]),this.apps[s]=e.initializeApp(t,s)}return this.apps[s]})})})(),p.context.current().currentAssemblyBeingLoaded("","function"==typeof onLoadComplete?onLoadComplete:null),p.registerAdo('{"name":"flair.server.firebase","file":"./flair.server.firebase{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.60.21","lupdate":"Wed, 25 Sep 2019 01:50:34 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.FirebaseApp"],"resources":[],"assets":["main.js","start.js"],"routes":[]}'),Object.freeze({name:"flair.server.firebase",settings:Ie,config:Ce})});