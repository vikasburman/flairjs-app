/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.server
 *     File: ./flair.server.js
 *  Version: 0.59.55
 *  Sat, 21 Sep 2019 20:27:55 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,t){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>t):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):e["flair.server"]=t}(this,async function(e,t){"use strict";const{Class:s,Struct:i,Enum:n,Interface:r,Mixin:a,Aspects:o,AppDomain:c,$$:l,attr:u,bring:p,Container:f,include:d,Port:m,on:v,post:y,telemetry:h,Reflector:g,Serializer:b,Tasks:w,as:S,is:x,isDefined:A,isComplies:j,isDerivedFrom:P,isAbstract:O,isSealed:T,isStatic:I,isSingleton:R,isDeprecated:E,isImplements:B,isInstanceOf:D,isMixed:N,getAssembly:k,getAttr:C,getContext:F,getResource:V,getRoute:L,getType:M,ns:z,getTypeOf:H,getTypeName:G,typeOf:J,dispose:U,using:$,Args:W,Exception:q,noop:K,nip:Q,nim:X,nie:Y,event:Z}=e,{TaskInfo:_}=e.Tasks,{env:ee}=e.options,{guid:te,stuff:se,replaceAll:ie,splitAndTrim:ne,findIndexByProp:re,findItemByProp:ae,which:oe,isArrowFunc:ce,isASyncFunc:le,sieve:ue,deepMerge:pe,getLoadedScript:fe,b64EncodeUnicode:de,b64DecodeUnicode:me,lens:ve,globalSetting:ye}=e.utils,he=ee.isServer||ee.isWorker?null:(!0).document,ge=c.context.current().name,be=t,we=be.substr(0,be.lastIndexOf("/")+1);c.loadPathOf("flair.server",we);let Se=JSON.parse('{"envVars":{"vars":[],"options":{"overwrite":true}}}'),xe=m("settingsReader");if("function"==typeof xe){let e=xe("flair.server");e&&(Se=pe([Se,e],!1))}Se=Object.freeze(Se);let Ae=JSON.parse("{}");return Ae=Object.freeze(Ae),c.context.current().currentAssemblyBeingLoaded("./flair.server{.min}.js"),await(async()=>{const{Handler:e}=await z("flair.app");l("ns","flair.api"),s("RestHandler",e,function(){l("private"),this.run=(async(e,t,s)=>{let i=null;if(e!==K)try{i=await e(t,s)}catch(e){s.status(e.status||500).json({status:e.status,message:e.message})}else s.status(501).json({status:"501",message:"Not Implemented"});return i}),this.get=(async(e,t)=>await this.run(this.onGet,e,t)),this.post=(async(e,t)=>await this.run(this.onPost,e,t)),this.put=(async(e,t)=>await this.run(this.onPut,e,t)),this.patch=(async(e,t)=>await this.run(this.onPatch,e,t)),this.delete=(async(e,t)=>await this.run(this.onDelete,e,t)),l("protected"),l("virtual"),l("async"),this.onGet=K,l("protected"),l("virtual"),l("async"),this.onPost=K,l("protected"),l("virtual"),l("async"),this.onPut=K,l("protected"),l("virtual"),l("async"),this.onPatch=K,l("protected"),l("virtual"),l("async"),this.onDelete=K})})(),await(async()=>{const{RestHandler:e}=await z("flair.api");l("ns","flair.api"),s("RESTEndPoint",e,function(){})})(),await(async()=>{l("ns","flair.api"),s("RestInterceptor",function(){l("virtual"),l("async"),this.run=K})})(),await(async()=>{const{Bootware:e}=await z("flair.app");l("sealed"),l("ns","flair.boot"),s("NodeEnv",e,function(){l("override"),this.construct=(e=>{e("Node Server Environment")}),l("override"),this.boot=(async e=>{if(e(),Se.envVars.vars.length>0){const e=await d("node-env-file | x");if(e)for(let t of Se.envVars.vars)e(c.resolvePath(t),Se.envVars.options)}})})})(),c.context.current().currentAssemblyBeingLoaded(),c.registerAdo('{"name":"flair.server","file":"./flair.server{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.59.55","lupdate":"Sat, 21 Sep 2019 20:27:55 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.api.RestHandler","flair.api.RESTEndPoint","flair.api.RestInterceptor","flair.boot.NodeEnv"],"resources":[],"assets":["main.js","start.js"],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.server",settings:Se,config:Ae})});