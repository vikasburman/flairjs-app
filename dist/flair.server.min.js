/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.server
 *     File: ./flair.server.js
 *  Version: 0.56.21
 *  Mon, 02 Sep 2019 05:52:55 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,t){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>t):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):e["flair.server"]=t}(this,async function(e,t){"use strict";const{Class:s,Struct:i,Enum:r,Interface:n,Mixin:a,Aspects:o,AppDomain:c,$$:l,attr:p,bring:u,Container:d,include:f,Port:$,on:v,post:y,telemetry:m,Reflector:h,Serializer:g,Tasks:b,as:w,is:S,isDefined:x,isComplies:A,isDerivedFrom:P,isAbstract:j,isSealed:O,isStatic:T,isSingleton:I,isDeprecated:R,isImplements:E,isInstanceOf:B,isMixed:D,getAssembly:N,getAttr:k,getContext:z,getResource:C,getRoute:F,getType:M,ns:V,getTypeOf:L,getTypeName:H,typeOf:G,dispose:J,using:U,Args:W,Exception:q,noop:K,nip:Q,nim:X,nie:Y,event:Z}=e,{TaskInfo:_}=e.Tasks,{env:ee}=e.options,{guid:te,stuff:se,replaceAll:ie,splitAndTrim:re,findIndexByProp:ne,findItemByProp:ae,which:oe,isArrowFunc:ce,isASyncFunc:le,sieve:pe,deepMerge:ue,getLoadedScript:de,b64EncodeUnicode:fe,b64DecodeUnicode:$e,lens:ve,globalSetting:ye}=e.utils,{$$static:me,$$abstract:he,$$virtual:ge,$$override:be,$$sealed:we,$$private:Se,$$privateSet:xe,$$protected:Ae,$$protectedSet:Pe,$$readonly:je,$$async:Oe,$$overload:Te,$$enumerate:Ie,$$dispose:Re,$$post:Ee,$$on:Be,$$timer:De,$$type:Ne,$$args:ke,$$inject:ze,$$resource:Ce,$$asset:Fe,$$singleton:Me,$$serialize:Ve,$$deprecate:Le,$$session:He,$$state:Ge,$$conditional:Je,$$noserialize:Ue,$$ns:We}=l,qe=ee.isServer||ee.isWorker?null:(!0).document,Ke=c.context.current().name,Qe=t,Xe=Qe.substr(0,Qe.lastIndexOf("/")+1);c.loadPathOf("flair.server",Xe);let Ye=JSON.parse('{"envVars":{"vars":[],"options":{"overwrite":true}}}'),Ze=e.Port("settingsReader");if("function"==typeof Ze){let e=Ze("flair.server");e&&(Ye=ue([Ye,e],!1))}Ye=Object.freeze(Ye);let _e=JSON.parse("{}");return _e=Object.freeze(_e),c.context.current().currentAssemblyBeingLoaded("./flair.server{.min}.js"),await(async()=>{const{Handler:e}=await V("flair.app");l("ns","flair.api"),s("RestHandler",e,function(){l("private"),this.run=(async(e,t,s)=>{let i=null;if(e!==K)try{i=await e(t,s)}catch(e){s.status(e.status||500).json({status:e.status,message:e.message})}else s.status(501).json({status:"501",message:"Not Implemented"});return i}),this.get=(async(e,t)=>await this.run(this.onGet,e,t)),this.post=(async(e,t)=>await this.run(this.onPost,e,t)),this.put=(async(e,t)=>await this.run(this.onPut,e,t)),this.patch=(async(e,t)=>await this.run(this.onPatch,e,t)),this.delete=(async(e,t)=>await this.run(this.onDelete,e,t)),l("protected"),l("virtual"),l("async"),this.onGet=K,l("protected"),l("virtual"),l("async"),this.onPost=K,l("protected"),l("virtual"),l("async"),this.onPut=K,l("protected"),l("virtual"),l("async"),this.onPatch=K,l("protected"),l("virtual"),l("async"),this.onDelete=K})})(),await(async()=>{const{RestHandler:e}=await V("flair.api");l("ns","flair.api"),s("RESTEndPoint",e,function(){})})(),await(async()=>{l("ns","flair.api"),s("RestInterceptor",function(){l("virtual"),l("async"),this.run=K})})(),await(async()=>{const{Bootware:e}=await V("flair.app");l("sealed"),l("ns","flair.boot"),s("NodeEnv",e,function(){l("override"),this.construct=(e=>{e("Node Server Environment")}),l("override"),this.boot=(async e=>{if(e(),Ye.envVars.vars.length>0){const e=await f("node-env-file | x");if(e)for(let t of Ye.envVars.vars)e(c.resolvePath(t),Ye.envVars.options)}})})})(),c.context.current().currentAssemblyBeingLoaded(),c.registerAdo('{"name":"flair.server","file":"./flair.server{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.56.21","lupdate":"Mon, 02 Sep 2019 05:52:55 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.api.RestHandler","flair.api.RESTEndPoint","flair.api.RestInterceptor","flair.boot.NodeEnv"],"resources":[],"assets":[],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.server",settings:Ye,config:_e})});