/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.55.59
 *  Mon, 19 Aug 2019 00:49:52 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.app"]=e}(this,async function(t,e){"use strict";const{Class:a,Struct:i,Enum:r,Interface:o,Mixin:s,Aspects:n,AppDomain:l,$$:c,attr:p,bring:f,Container:d,include:u,Port:y,on:w,post:h,telemetry:$,Reflector:m,Serializer:v,Tasks:b,as:g,is:S,isDefined:k,isComplies:A,isDerivedFrom:O,isAbstract:E,isSealed:I,isStatic:x,isSingleton:B,isDeprecated:M,isImplements:j,isInstanceOf:C,isMixed:D,getAssembly:T,getAttr:P,getContext:W,getResource:H,getRoute:z,getType:F,ns:R,getTypeOf:L,getTypeName:N,typeOf:V,dispose:J,using:U,Args:G,Exception:q,noop:K,nip:Q,nim:X,nie:Y,event:Z}=t,{TaskInfo:_}=t.Tasks,{env:tt}=t.options,{guid:et,stuff:at,replaceAll:it,splitAndTrim:rt,findIndexByProp:ot,findItemByProp:st,which:nt,isArrowFunc:lt,isASyncFunc:ct,sieve:pt,deepMerge:ft,getLoadedScript:dt,b64EncodeUnicode:ut,b64DecodeUnicode:yt,lens:wt,globalSetting:ht}=t.utils,{$$static:$t,$$abstract:mt,$$virtual:vt,$$override:bt,$$sealed:gt,$$private:St,$$privateSet:kt,$$protected:At,$$protectedSet:Ot,$$readonly:Et,$$async:It,$$overload:xt,$$enumerate:Bt,$$dispose:Mt,$$post:jt,$$on:Ct,$$timer:Dt,$$type:Tt,$$args:Pt,$$inject:Wt,$$resource:Ht,$$asset:zt,$$singleton:Ft,$$serialize:Rt,$$deprecate:Lt,$$session:Nt,$$state:Vt,$$conditional:Jt,$$noserialize:Ut,$$ns:Gt}=c,qt=tt.isServer||tt.isWorker?null:(!0).document,Kt=l.context.current().name,Qt=e,Xt=Qt.substr(0,Qt.lastIndexOf("/")+1);l.loadPathOf("flair.app",Xt);let Yt=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","boot":{"files":[],"preambles":[],"ports":{},"bootwares":[]},"di":{"container":{}}}'),Zt=t.Port("settingsReader");if("function"==typeof Zt){let t=Zt("flair.app");t&&(Yt=ft([Yt,t],!1))}Yt=Object.freeze(Yt);let _t=JSON.parse("{}");_t=Object.freeze(_t);let te=()=>{};return l.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{c("abstract"),c("ns","flair.app"),a("Bootware",function(){c("virtual"),this.construct=((t,e,a)=>{let i=G("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(t,e,a);i.throwOnError(this.construct),this.info=Object.freeze({name:i.values.name||"",version:i.values.version||"",isMountSpecific:i.values.isMountSpecific||!1})}),c("virtual"),c("async"),this.boot=K,c("readonly"),this.info=null,c("virtual"),c("async"),this.ready=K,c("virtual"),this.dispose=K})})(),await(async()=>{const{IDisposable:t}=R();c("ns","flair.app"),a("Handler",[t],function(){c("virtual"),this.construct=(()=>{}),c("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:t}=R(),{Bootware:e}=R("flair.app");c("ns","flair.app"),a("App",e,[t],function(){c("override"),this.construct=(t=>{let e=T(this);t(e.title,e.version)}),c("override"),c("sealed"),this.boot=(async t=>{t(),l.host().error.add(this.handleError)}),this.start=(async()=>{if(!tt.isServer&&!tt.isWorker){const{ViewState:t}=R("flair.ui");new t}await this.onStart()}),c("virtual"),c("async"),this.onStart=K,c("override"),c("sealed"),this.ready=(async()=>{await this.onReady()}),c("virtual"),c("async"),this.onReady=K,this.stop=(async()=>{if(!tt.isServer&&!tt.isWorker){const{ViewState:t}=R("flair.ui");(new t).clear()}await this.onStop()}),c("virtual"),c("async"),this.onStop=K,c("private"),this.handleError=(t=>{this.onError(t.args.error)}),c("virtual"),this.onError=(t=>{throw q.OperationFailed(t,this.onError)}),c("override"),this.dispose=(t=>{t(),l.host().error.remove(this.handleError)})})})(),await(async()=>{const{IDisposable:t}=R(),{Bootware:e}=R("flair.app");c("ns","flair.app"),a("Host",e,[t],function(){c("virtual"),c("async"),this.start=K,c("virtual"),c("async"),this.stop=K,this.error=Z(t=>({error:t})),this.raiseError=(t=>{this.error(t)})})})(),await(async()=>{const{Bootware:e}=R("flair.app");c("static"),c("ns","flair.app"),a("BootEngine",function(){this.start=async function(){let a=[],i=[];const r=async()=>{for(let t of Yt.boot.files)(t=nt(t))&&await u(t)},o=async()=>{if(tt.isClient&&!tt.isWorker)for(let t of Yt.boot.links){let e=document.createElement("link");for(let a in t)e[a]=t[a];(!0).document.getElementsByTagName("head")[0].appendChild(e)}},s=async()=>{let e=null;for(let a of Yt.boot.preambles)(a=nt(a))&&(a.endsWith("/")||(a+="/"),a+="preamble.js",e=await u(a),await e(t))},n=async()=>{let t=null,e="";for(let a in Yt.boot.ports)(e=nt(Yt.boot.ports[a]))&&(t=new(await u(e)),y.connect(a,t.factory))},c=async()=>{let t=null,r=null,o=null;for(let s of Yt.boot.bootwares)(s=nt(s))&&(t=await u(s))&&"boolean"!=typeof t&&(r=g(t,e))&&(o=new r,a.push(o),o.info.isMountSpecific&&i.push(o))},p=async t=>{if(tt.isWorker){0!==i.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let e of a)e.info.isMountSpecific||await e[t]()}else{let e=l.host().mounts,r=Object.keys(e),o="",s=null;s=e[o="main"];for(let e of a)await e[t](s);for(let a of r)if("main"!==a){s=e[a];for(let e of i)await e[t](s)}}},f=async()=>{const t=await u(Yt.host),e=await u(Yt.app);if(!tt.isWorker){let e=new t;await e.boot(),l.host(e)}await p("boot");let a=new e;await a.boot(),l.app(a)},d=async()=>{tt.isWorker||await l.host().start(),await l.app().start()},w=()=>new Promise((t,e)=>{"loading"!==document.readyState?t():(!0).document.addEventListener("DOMContentLoaded",()=>{t()})}),h=()=>new Promise((t,e)=>{(!0).document.addEventListener("deviceready",()=>{t()},!1)}),$=async()=>{tt.isClient&&!tt.isWorker&&(await w(),tt.isCordova&&await h()),tt.isWorker||await l.host().ready(),await p("ready"),await l.app().ready()};return await o(),await r(),await s(),await n(),await c(),await f(),await d(),await $(),console.log("ready!"),!0}})})(),await(async()=>{c("ns","flair.app"),o("IPortHandler",function(){this.port=Q,this.factory=X})})(),await(async()=>{const{Bootware:t}=R("flair.app");c("sealed"),c("ns","flair.boot"),a("DIContainer",t,function(){c("override"),this.construct=(t=>{t("DI Container")}),c("override"),this.boot=(async t=>{t();let e=Yt.di.container;for(let t in e)e.hasOwnProperty(t)&&d.register(t,e[t])})})})(),l.context.current().currentAssemblyBeingLoaded(""),l.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.59","lupdate":"Mon, 19 Aug 2019 00:49:52 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","flair.app.BootEngine","flair.app.IPortHandler","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}'),Object.freeze({name:"flair.app",settings:Yt,config:_t})});