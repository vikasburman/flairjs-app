/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.55.14
 *  Thu, 08 Aug 2019 23:28:34 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,t){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>t):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):e["flair.app"]=t}(this,async function(e,t){"use strict";const{Class:i,Struct:a,Enum:r,Interface:s,Mixin:o,Aspects:n,AppDomain:l,$$:c,attr:p,bring:f,Container:d,include:u,Port:y,on:h,post:$,telemetry:w,Reflector:m,Serializer:v,Tasks:b,as:g,is:S,isDefined:k,isComplies:A,isDerivedFrom:E,isAbstract:O,isSealed:x,isStatic:B,isSingleton:I,isDeprecated:j,isImplements:C,isInstanceOf:M,isMixed:D,getAssembly:T,getAttr:W,getContext:P,getResource:z,getRoute:F,getType:R,ns:H,getTypeOf:L,getTypeName:N,typeOf:V,dispose:J,using:U,Args:G,Exception:q,noop:K,nip:Q,nim:X,nie:Y,event:Z}=e,{TaskInfo:_}=e.Tasks,{env:ee}=e.options,{guid:te,forEachAsync:ie,stuff:ae,replaceAll:re,splitAndTrim:se,findIndexByProp:oe,findItemByProp:ne,which:le,isArrowFunc:ce,isASyncFunc:pe,sieve:fe,deepMerge:de,getLoadedScript:ue,b64EncodeUnicode:ye,b64DecodeUnicode:he,lens:$e,globalSetting:we}=e.utils,{$$static:me,$$abstract:ve,$$virtual:be,$$override:ge,$$sealed:Se,$$private:ke,$$privateSet:Ae,$$protected:Ee,$$protectedSet:Oe,$$readonly:xe,$$async:Be,$$overload:Ie,$$enumerate:je,$$dispose:Ce,$$post:Me,$$on:De,$$timer:Te,$$type:We,$$args:Pe,$$inject:ze,$$resource:Fe,$$asset:Re,$$singleton:He,$$serialize:Le,$$deprecate:Ne,$$session:Ve,$$state:Je,$$conditional:Ue,$$noserialize:Ge,$$ns:qe}=c,Ke=ee.isServer||ee.isWorker?null:(!0).document,Qe=l.context.current().name,Xe=t,Ye=Xe.substr(0,Xe.lastIndexOf("/")+1);l.loadPathOf("flair.app",Ye);let Ze=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","boot":{"files":[],"preambles":[],"bootwares":[]},"di":{"container":{}}}'),_e=e.Port("settingsReader");if("function"==typeof _e){let e=_e("flair.app");e&&(Ze=de([Ze,e],!1))}Ze=Object.freeze(Ze);let et=JSON.parse("{}");et=Object.freeze(et);let tt=()=>{};return l.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{c("abstract"),c("ns","flair.app"),i("Bootware",function(){c("virtual"),this.construct=((e,t,i)=>{let a=G("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(e,t,i);a.throwOnError(this.construct),this.info=Object.freeze({name:a.values.name||"",version:a.values.version||"",isMountSpecific:a.values.isMountSpecific||!1})}),c("virtual"),c("async"),this.boot=K,c("readonly"),this.info=null,c("virtual"),c("async"),this.ready=K,c("virtual"),this.dispose=K})})(),await(async()=>{const{IDisposable:e}=H();c("ns","flair.app"),i("Handler",[e],function(){c("virtual"),this.construct=(()=>{}),c("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:e}=H(),{Bootware:t}=H("flair.app");c("ns","flair.app"),i("App",t,[e],function(){c("override"),this.construct=(e=>{let t=T(this);e(t.title,t.version)}),c("override"),c("sealed"),this.boot=(async e=>{e(),l.host().error.add(this.handleError)}),this.start=(async()=>{if(!ee.isServer&&!ee.isWorker){const{ViewState:e}=H("flair.ui");new e}await this.onStart()}),c("virtual"),c("async"),this.onStart=K,c("override"),c("sealed"),this.ready=(async()=>{await this.onReady()}),c("virtual"),c("async"),this.onReady=K,this.stop=(async()=>{if(!ee.isServer&&!ee.isWorker){const{ViewState:e}=H("flair.ui");(new e).clear()}await this.onStop()}),c("virtual"),c("async"),this.onStop=K,c("private"),this.handleError=(e=>{this.onError(e.args.error)}),c("virtual"),this.onError=(e=>{throw q.OperationFailed(e,this.onError)}),c("override"),this.dispose=(e=>{e(),l.host().error.remove(this.handleError)})})})(),await(async()=>{const{IDisposable:e}=H(),{Bootware:t}=H("flair.app");c("ns","flair.app"),i("Host",t,[e],function(){c("virtual"),c("async"),this.start=K,c("virtual"),c("async"),this.stop=K,this.error=Z(e=>({error:e})),this.raiseError=(e=>{this.error(e)})})})(),await(async()=>{const{Bootware:t}=H("flair.app");c("static"),c("ns","flair.app"),i("BootEngine",function(){this.start=async function(){let i=[],a=[];const r=async()=>{for(let e of Ze.boot.files)(e=le(e))&&await u(e)},s=async()=>{if(ee.isClient&&!ee.isWorker)for(let e of Ze.boot.links){let t=document.createElement("link");for(let i in e)t[i]=e[i];(!0).document.getElementsByTagName("head")[0].appendChild(t)}},o=async()=>{let t=null;for(let i of Ze.boot.preambles)(i=le(i))&&(i.endsWith("/")||(i+="/"),i+="preamble.js",t=await u(i),await t(e))},n=async()=>{let e=null,r=null,s=null;for(let o of Ze.boot.bootwares)(o=le(o))&&(e=await u(o))&&"boolean"!=typeof e&&(r=g(e,t))&&(s=new r,i.push(s),s.info.isMountSpecific&&a.push(s))},c=async e=>{if(ee.isWorker){0!==a.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let t of i)t.info.isMountSpecific||await t[e]()}else{let t=l.host().mounts,r=Object.keys(t),s="",o=null;o=t[s="main"];for(let t of i)await t[e](o);for(let i of r)if("main"!==i){o=t[i];for(let t of a)await t[e](o)}}},p=async()=>{const e=await u(Ze.host),t=await u(Ze.app);if(!ee.isWorker){let t=new e;await t.boot(),l.host(t)}await c("boot");let i=new t;await i.boot(),l.app(i)},f=async()=>{ee.isWorker||await l.host().start(),await l.app().start()},d=()=>new Promise((e,t)=>{"loading"!==document.readyState?e():(!0).document.addEventListener("DOMContentLoaded",()=>{e()})}),y=()=>new Promise((e,t)=>{(!0).document.addEventListener("deviceready",()=>{e()},!1)}),h=async()=>{ee.isClient&&!ee.isWorker&&(await d(),ee.isCordova&&await y()),ee.isWorker||await l.host().ready(),await c("ready"),await l.app().ready()};return await s(),await r(),await o(),await n(),await p(),await f(),await h(),console.log("ready!"),!0}})})(),await(async()=>{const{Bootware:e}=H("flair.app");c("sealed"),c("ns","flair.boot"),i("DIContainer",e,function(){c("override"),this.construct=(e=>{e("DI Container")}),c("override"),this.boot=(async e=>{e();let t=Ze.di.container;for(let e in t)t.hasOwnProperty(e)&&d.register(e,t[e])})})})(),l.context.current().currentAssemblyBeingLoaded(""),l.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.14","lupdate":"Thu, 08 Aug 2019 23:28:34 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","flair.app.BootEngine","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}'),Object.freeze({name:"flair.app",settings:Ze,config:et})});