/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.55.20
 *  Fri, 09 Aug 2019 17:53:11 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.app"]=e}(this,async function(t,e){"use strict";const{Class:a,Struct:i,Enum:r,Interface:s,Mixin:o,Aspects:n,AppDomain:c,$$:l,attr:p,bring:f,Container:u,include:d,Port:h,on:y,post:w,telemetry:$,Reflector:m,Serializer:v,Tasks:g,as:b,is:S,isDefined:A,isComplies:k,isDerivedFrom:E,isAbstract:O,isSealed:x,isStatic:B,isSingleton:I,isDeprecated:j,isImplements:C,isInstanceOf:M,isMixed:D,getAssembly:T,getAttr:W,getContext:F,getResource:P,getRoute:z,getType:H,ns:R,getTypeOf:L,getTypeName:N,typeOf:V,dispose:J,using:_,Args:U,Exception:G,noop:q,nip:K,nim:Q,nie:X,event:Y}=t,{TaskInfo:Z}=t.Tasks,{env:tt}=t.options,{guid:et,forEachAsync:at,stuff:it,replaceAll:rt,splitAndTrim:st,findIndexByProp:ot,findItemByProp:nt,which:ct,isArrowFunc:lt,isASyncFunc:pt,sieve:ft,deepMerge:ut,getLoadedScript:dt,b64EncodeUnicode:ht,b64DecodeUnicode:yt,lens:wt,globalSetting:$t}=t.utils,{$$static:mt,$$abstract:vt,$$virtual:gt,$$override:bt,$$sealed:St,$$private:At,$$privateSet:kt,$$protected:Et,$$protectedSet:Ot,$$readonly:xt,$$async:Bt,$$overload:It,$$enumerate:jt,$$dispose:Ct,$$post:Mt,$$on:Dt,$$timer:Tt,$$type:Wt,$$args:Ft,$$inject:Pt,$$resource:zt,$$asset:Ht,$$singleton:Rt,$$serialize:Lt,$$deprecate:Nt,$$session:Vt,$$state:Jt,$$conditional:_t,$$noserialize:Ut,$$ns:Gt}=l,qt=tt.isServer||tt.isWorker?null:(!0).document,Kt=c.context.current().name,Qt=e,Xt=Qt.substr(0,Qt.lastIndexOf("/")+1);c.loadPathOf("flair.app",Xt);let Yt=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","boot":{"files":[],"preambles":[],"bootwares":[]},"di":{"container":{}}}'),Zt=t.Port("settingsReader");if("function"==typeof Zt){let t=Zt("flair.app");t&&(Yt=ut([Yt,t],!1))}Yt=Object.freeze(Yt);let te=JSON.parse("{}");te=Object.freeze(te);let ee=()=>{};return c.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{l("abstract"),l("ns","flair.app"),a("Bootware",function(){l("virtual"),this.construct=((t,e,a)=>{let i=U("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(t,e,a);i.throwOnError(this.construct),this.info=Object.freeze({name:i.values.name||"",version:i.values.version||"",isMountSpecific:i.values.isMountSpecific||!1})}),l("virtual"),l("async"),this.boot=q,l("readonly"),this.info=null,l("virtual"),l("async"),this.ready=q,l("virtual"),this.dispose=q})})(),await(async()=>{const{IDisposable:t}=R();l("ns","flair.app"),a("Handler",[t],function(){l("virtual"),this.construct=(()=>{}),l("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:t}=R(),{Bootware:e}=R("flair.app");l("ns","flair.app"),a("App",e,[t],function(){l("override"),this.construct=(t=>{let e=T(this);t(e.title,e.version)}),l("override"),l("sealed"),this.boot=(async t=>{t(),c.host().error.add(this.handleError)}),this.start=(async()=>{if(!tt.isServer&&!tt.isWorker){const{ViewState:t}=R("flair.ui");new t}await this.onStart()}),l("virtual"),l("async"),this.onStart=q,l("override"),l("sealed"),this.ready=(async()=>{await this.onReady()}),l("virtual"),l("async"),this.onReady=q,this.stop=(async()=>{if(!tt.isServer&&!tt.isWorker){const{ViewState:t}=R("flair.ui");(new t).clear()}await this.onStop()}),l("virtual"),l("async"),this.onStop=q,l("private"),this.handleError=(t=>{this.onError(t.args.error)}),l("virtual"),this.onError=(t=>{throw G.OperationFailed(t,this.onError)}),l("override"),this.dispose=(t=>{t(),c.host().error.remove(this.handleError)})})})(),await(async()=>{const{IDisposable:t}=R(),{Bootware:e}=R("flair.app");l("ns","flair.app"),a("Host",e,[t],function(){l("virtual"),l("async"),this.start=q,l("virtual"),l("async"),this.stop=q,this.error=Y(t=>({error:t})),this.raiseError=(t=>{this.error(t)})})})(),await(async()=>{const{Attribute:t}=R();l("ns","(root)"),a("cache",t,function(){l("override"),this.construct=((t,e)=>{t(e),this.constraints="(class || struct) && (func && async) && !(timer || on || @fetch || @cache)"}),l("override"),this.decorateFunction=((t,e,a,i)=>{let r="number"==typeof this.args[0]?{duration:this.args[0]}:this.args[0],s=r&&r.duration,o=`${e}___${a}`,n=h("cacheHandler"),c=async(...t)=>{let e=await i(...t);return s&&await n.set(o,r,e),e};return async function(...t){if(s)try{return await n.get(o,r)}catch(t){}return await c(...t)}})})})(),await(async()=>{const{Bootware:e}=R("flair.app");l("static"),l("ns","flair.app"),a("BootEngine",function(){this.start=async function(){let a=[],i=[];const r=async()=>{for(let t of Yt.boot.files)(t=ct(t))&&await d(t)},s=async()=>{if(tt.isClient&&!tt.isWorker)for(let t of Yt.boot.links){let e=document.createElement("link");for(let a in t)e[a]=t[a];(!0).document.getElementsByTagName("head")[0].appendChild(e)}},o=async()=>{let e=null;for(let a of Yt.boot.preambles)(a=ct(a))&&(a.endsWith("/")||(a+="/"),a+="preamble.js",e=await d(a),await e(t))},n=async()=>{let t=null,r=null,s=null;for(let o of Yt.boot.bootwares)(o=ct(o))&&(t=await d(o))&&"boolean"!=typeof t&&(r=b(t,e))&&(s=new r,a.push(s),s.info.isMountSpecific&&i.push(s))},l=async t=>{if(tt.isWorker){0!==i.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let e of a)e.info.isMountSpecific||await e[t]()}else{let e=c.host().mounts,r=Object.keys(e),s="",o=null;o=e[s="main"];for(let e of a)await e[t](o);for(let a of r)if("main"!==a){o=e[a];for(let e of i)await e[t](o)}}},p=async()=>{const t=await d(Yt.host),e=await d(Yt.app);if(!tt.isWorker){let e=new t;await e.boot(),c.host(e)}await l("boot");let a=new e;await a.boot(),c.app(a)},f=async()=>{tt.isWorker||await c.host().start(),await c.app().start()},u=()=>new Promise((t,e)=>{"loading"!==document.readyState?t():(!0).document.addEventListener("DOMContentLoaded",()=>{t()})}),h=()=>new Promise((t,e)=>{(!0).document.addEventListener("deviceready",()=>{t()},!1)}),y=async()=>{tt.isClient&&!tt.isWorker&&(await u(),tt.isCordova&&await h()),tt.isWorker||await c.host().ready(),await l("ready"),await c.app().ready()};return await s(),await r(),await o(),await n(),await p(),await f(),await y(),console.log("ready!"),!0}})})(),await(async()=>{const{Bootware:t}=R("flair.app");l("sealed"),l("ns","flair.boot"),a("DIContainer",t,function(){l("override"),this.construct=(t=>{t("DI Container")}),l("override"),this.boot=(async t=>{t();let e=Yt.di.container;for(let t in e)e.hasOwnProperty(t)&&u.register(t,e[t])})})})(),c.context.current().currentAssemblyBeingLoaded(""),c.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.20","lupdate":"Fri, 09 Aug 2019 17:53:11 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","cache","flair.app.BootEngine","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}'),Object.freeze({name:"flair.app",settings:Yt,config:te})});