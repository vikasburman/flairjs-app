/**
 * @preserve
 * Flair.js Fabric
 * Foundation for True Object Oriented JavaScript Apps
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.55.80
 *  Sat, 31 Aug 2019 02:47:53 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(e,t){"use strict";"function"==typeof!0&&(!0).amd?(!0)(()=>t):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):e["flair.app"]=t}(this,async function(e,t){"use strict";const{Class:a,Struct:i,Enum:r,Interface:o,Mixin:s,Aspects:n,AppDomain:l,$$:p,attr:c,bring:f,Container:d,include:u,Port:h,on:y,post:m,telemetry:w,Reflector:$,Serializer:g,Tasks:b,as:v,is:S,isDefined:k,isComplies:E,isDerivedFrom:C,isAbstract:O,isSealed:x,isStatic:A,isSingleton:B,isDeprecated:I,isImplements:M,isInstanceOf:j,isMixed:T,getAssembly:D,getAttr:R,getContext:W,getResource:P,getRoute:H,getType:L,ns:z,getTypeOf:F,getTypeName:N,typeOf:V,dispose:J,using:U,Args:G,Exception:q,noop:K,nip:Q,nim:X,nie:Y,event:Z}=e,{TaskInfo:_}=e.Tasks,{env:ee}=e.options,{guid:te,stuff:ae,replaceAll:ie,splitAndTrim:re,findIndexByProp:oe,findItemByProp:se,which:ne,isArrowFunc:le,isASyncFunc:pe,sieve:ce,deepMerge:fe,getLoadedScript:de,b64EncodeUnicode:ue,b64DecodeUnicode:he,lens:ye,globalSetting:me}=e.utils,{$$static:we,$$abstract:$e,$$virtual:ge,$$override:be,$$sealed:ve,$$private:Se,$$privateSet:ke,$$protected:Ee,$$protectedSet:Ce,$$readonly:Oe,$$async:xe,$$overload:Ae,$$enumerate:Be,$$dispose:Ie,$$post:Me,$$on:je,$$timer:Te,$$type:De,$$args:Re,$$inject:We,$$resource:Pe,$$asset:He,$$singleton:Le,$$serialize:ze,$$deprecate:Fe,$$session:Ne,$$state:Ve,$$conditional:Je,$$noserialize:Ue,$$ns:Ge}=p,qe=ee.isServer||ee.isWorker?null:(!0).document,Ke=l.context.current().name,Qe=t,Xe=Qe.substr(0,Qe.lastIndexOf("/")+1);l.loadPathOf("flair.app",Xe);let Ye=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","boot":{"links":[],"scripts":[],"meta":[],"preambles":[],"ports":{},"bootwares":[]},"di":{"container":{}}}'),Ze=e.Port("settingsReader");if("function"==typeof Ze){let e=Ze("flair.app");e&&(Ye=fe([Ye,e],!1))}Ye=Object.freeze(Ye);let _e=JSON.parse("{}");return _e=Object.freeze(_e),l.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{p("abstract"),p("ns","flair.app"),a("Bootware",function(){p("virtual"),this.construct=((e,t,a)=>{let i=G("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(e,t,a);i.throwOnError(this.construct),this.info=Object.freeze({name:i.values.name||"",version:i.values.version||"",isMountSpecific:i.values.isMountSpecific||!1})}),p("virtual"),p("async"),this.boot=K,p("readonly"),this.info=null,p("virtual"),p("async"),this.ready=K,p("virtual"),this.dispose=K})})(),await(async()=>{const{IDisposable:e}=z();p("ns","flair.app"),a("Handler",[e],function(){p("virtual"),this.construct=(()=>{}),p("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:e}=z(),{Bootware:t}=z("flair.app");p("ns","flair.app"),a("App",t,[e],function(){p("override"),this.construct=(e=>{let t=D(this);e(t.title,t.version)}),p("override"),p("sealed"),this.boot=(async e=>{e(),l.host().error.add(this.handleError)}),this.start=(async()=>{if(!ee.isServer&&!ee.isWorker){const{ViewState:e}=z("flair.ui");new e}await this.onStart()}),p("virtual"),p("async"),this.onStart=K,p("override"),p("sealed"),this.ready=(async()=>{await this.onReady()}),p("virtual"),p("async"),this.onReady=K,this.stop=(async()=>{if(!ee.isServer&&!ee.isWorker){const{ViewState:e}=z("flair.ui");(new e).clear()}await this.onStop()}),p("virtual"),p("async"),this.onStop=K,p("private"),this.handleError=(e=>{this.onError(e.args.error)}),p("virtual"),this.onError=(e=>{throw q.OperationFailed(e,this.onError)}),p("virtual"),p("async"),this.getRoutingContext=K,p("override"),this.dispose=(e=>{e(),l.host().error.remove(this.handleError)})})})(),await(async()=>{const{IDisposable:e}=z(),{Bootware:t}=z("flair.app");p("ns","flair.app"),a("Host",t,[e],function(){p("virtual"),p("async"),this.start=K,p("virtual"),p("async"),this.stop=K,this.error=Z(e=>({error:e})),this.raiseError=(e=>{this.error(e)})})})(),await(async()=>{const{Bootware:t}=z("flair.app");p("static"),p("ns","flair.app"),a("BootEngine",function(){this.start=async function(){let a=[],i=[];const r=async()=>{if(ee.isClient&&!ee.isWorker){let e=(!0).document.getElementsByTagName("head")[0];for(let t of Ye.boot.scripts){let a=document.createElement("script");for(let e in t)a[e]="src"===e?ne(t[e],!0):t[e];e.appendChild(a)}}},o=async()=>{if(ee.isClient&&!ee.isWorker){let e=(!0).document.getElementsByTagName("head")[0];for(let t of Ye.boot.links){let a=document.createElement("link");for(let e in t)a[e]="href"===e?ne(t[e],!0):t[e];e.appendChild(a)}}},s=async()=>{if(ee.isClient&&!ee.isWorker){let e=(!0).document.getElementsByTagName("head")[0];for(let t of Ye.boot.meta){let a=document.createElement("meta");for(let e in t)a[e]=t[e];e.appendChild(a)}}},n=async()=>{let t=null;for(let a of Ye.boot.preambles)(a=ne(a))&&(a.endsWith("/")||(a+="/"),a+="preamble.js",t=await u(a),await t(e))},p=async()=>{let e=null,t="";for(let a in Ye.boot.ports)(t=ne(Ye.boot.ports[a]))&&(e=new(await u(t)),h.connect(a,e.factory))},c=async()=>{let e=null,r=null,o=null;for(let s of Ye.boot.bootwares)(s=ne(s))&&(e=await u(s))&&"boolean"!=typeof e&&(r=v(e,t))&&(o=new r,a.push(o),o.info.isMountSpecific&&i.push(o))},f=async e=>{if(ee.isWorker){0!==i.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let t of a)t.info.isMountSpecific||await t[e]()}else{let t=l.host().mounts,r=Object.keys(t),o="",s=null;s=t[o="main"];for(let t of a)await t[e](s);for(let a of r)if("main"!==a){s=t[a];for(let t of i)await t[e](s)}}},d=async()=>{const e=await u(Ye.host),t=await u(Ye.app);if(!ee.isWorker){let t=new e;await t.boot(),l.host(t)}await f("boot");let a=new t;await a.boot(),l.app(a)},y=async()=>{ee.isWorker||await l.host().start(),await l.app().start()},m=()=>new Promise((e,t)=>{"loading"!==document.readyState?e():(!0).document.addEventListener("DOMContentLoaded",()=>{e()})}),w=()=>new Promise((e,t)=>{(!0).document.addEventListener("deviceready",()=>{e()},!1)}),$=async()=>{ee.isClient&&!ee.isWorker&&(await m(),ee.isCordova&&await w()),ee.isWorker||await l.host().ready(),await f("ready"),await l.app().ready()};return await s(),await o(),await r(),await n(),await p(),await c(),await d(),await y(),await $(),console.log("ready!"),!0}})})(),await(async()=>{p("ns","flair.app"),o("IPortHandler",function(){this.port=Q,this.factory=X})})(),await(async()=>{p("ns","flair.app"),p("static"),a("RouterSettingReader",function(){this.getMergedSection=function(e,t,a,i){let r=[];if(t.all&&t.all.before&&t.all.before[e]&&r.push(...t.all.before[e]),t[a]&&t[a][e])if(0===r.length)r.push(...t[a][e]);else if(i)for(let o of t[a][e]){let e=se(r,i,o[i]);if(null!==e)for(let t in o)e[t]=o[t];else r.push(o)}else for(let i of t[a][e])"string"==typeof i&&-1!==r.indexOf(i)||r.push(i);if(t.all&&t.all.after&&t.all.after[e])if(0===r.length)r.push(...t.all.after[e]);else if(i)for(let a of t.all.after[e]){let e;null!==se(r,i,a[i])||r.push(a)}else for(let a of t.all.after[e])"string"==typeof a&&-1!==r.indexOf(a)||r.push(a);return r}})})(),await(async()=>{const{Bootware:e}=z("flair.app");p("sealed"),p("ns","flair.boot"),a("DIContainer",e,function(){p("override"),this.construct=(e=>{e("DI Container")}),p("override"),this.boot=(async e=>{e();let t=Ye.di.container;for(let e in t)t.hasOwnProperty(e)&&d.register(e,t[e])})})})(),l.context.current().currentAssemblyBeingLoaded(""),l.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","package":"flairjs-fabric","desc":"Foundation for True Object Oriented JavaScript Apps","title":"Flair.js Fabric","version":"0.55.80","lupdate":"Sat, 31 Aug 2019 02:47:53 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","flair.app.BootEngine","flair.app.IPortHandler","flair.app.RouterSettingReader","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}'),"function"==typeof onLoadComplete&&onLoadComplete(),Object.freeze({name:"flair.app",settings:Ye,config:_e})});